<!DOCTYPE html>
<html lang="id" data-bs-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3 X X X D O R R</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <!-- Animate.css -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <!-- Custom CSS -->

    <style>
    /* Definisi variabel warna */
:root {
    --primary-color: #9c27b0;
    --secondary-color: #e91e63;
    --dark-color: #212529;
    --light-color: #f8f9fa;
    --pastel-purple: #d1c4e9;
    --neon-purple: #b388ff;
    --pastel-pink: #f8bbd0;
}
/* Akhir definisi variabel warna */

/* Styling dasar body */
body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    overflow-x: hidden;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
}
/* Akhir styling dasar body */

/* Styling navbar brand */
.navbar-brand {
    font-family: 'Arial Rounded MT Bold', 'Arial', sans-serif;
    font-weight: bold;
    letter-spacing: 1px;
    font-size: 1.5rem;
    color: var(--primary-color) !important;
}
/* Akhir styling navbar brand */

/* Styling sidebar */
.sidebar {
    height: 100vh;
    position: fixed;
    left: 0;
    top: 0;
    z-index: 100;
    background: white;
    box-shadow: 0 0 10px rgba(0,0,0,0.1);
    transition: all 0.3s;
}

.sidebar-nav {
    width: 250px;
}

.sidebar .nav-link {
    padding: 0.75rem 1.5rem;
    color: var(--dark-color);
    border-radius: 0.5rem;
    margin: 0.25rem 1rem;
    transition: all 0.3s;
}

.sidebar .nav-link:hover, .sidebar .nav-link.active {
    background-color: var(--pastel-purple);
    color: var(--primary-color);
}

.sidebar .nav-link i {
    margin-right: 10px;
    width: 20px;
    text-align: center;
}
/* Akhir styling sidebar */

/* Styling konten utama */
.main-content {
    margin-left: 250px;
    padding: 20px;
    flex: 1;
    transition: all 0.3s;
    padding-bottom: 80px; /* Mencegah konten tertutup bottom navbar */
}
/* Akhir styling konten utama */

/* Styling bottom navbar untuk mobile */
.bottom-navbar {
    display: none;
    position: fixed;
    bottom: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    background: white;
    box-shadow: 0 -2px 10px rgba(0,0,0,0.1);
    padding: 8px 0;
    display: flex;
    justify-content: space-evenly;
    align-items: center;
}

.bottom-navbar .nav-item {
    flex: 1;
    text-align: center;
}

.bottom-navbar .nav-link {
    color: var(--dark-color);
    font-size: 0.75rem;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 4px;
}

.bottom-navbar .nav-link i {
    font-size: 1.1rem;
    margin-bottom: 4px;
}

.bottom-navbar .product-btn {
    background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));
    color: white !important;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 3px 10px rgba(0,0,0,0.2);
    animation: pulse 2s infinite;
    position: relative;
    top: -15px;
    margin: 0 auto;
}

.bottom-navbar .product-btn i {
    font-size: 1.3rem;
}
/* Akhir styling bottom navbar untuk mobile */

/* Animasi pulse untuk tombol produk */
@keyframes pulse {
    0% {
        box-shadow: 0 0 0 0 rgba(156, 39, 176, 0.7);
    }
    70% {
        box-shadow: 0 0 0 8px rgba(156, 39, 176, 0);
    }
    100% {
        box-shadow: 0 0 0 0 rgba(156, 39, 176, 0);
    }
}
/* Akhir animasi pulse */

/* Styling kartu profil dengan animasi flip */
.profile-card {
    perspective: 1000px;
    width: 100%;
    max-width: 400px;
    margin: 0 auto;
}

.profile-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.8s;
    transform-style: preserve-3d;
}

.profile-card.flipped .profile-card-inner {
    transform: rotateY(180deg);
}

.profile-card-front, .profile-card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 1rem;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.profile-card-back {
    background-color: white;
    transform: rotateY(180deg);
    padding: 20px;
}
/* Akhir styling kartu profil */

/* Styling timeline */
.timeline {
    position: relative;
    max-width: 1200px;
    margin: 0 auto;
}

.timeline::after {
    content: '';
    position: absolute;
    width: 6px;
    background-color: var(--pastel-purple);
    top: 0;
    bottom: 0;
    left: 50%;
    margin-left: -3px;
    border-radius: 10px;
}

.timeline-item {
    padding: 10px 40px;
    position: relative;
    width: 50%;
    box-sizing: border-box;
}

.timeline-item::after {
    content: '';
    position: absolute;
    width: 25px;
    height: 25px;
    right: -12px;
    background-color: var(--primary-color);
    border: 4px solid var(--pastel-purple);
    top: 15px;
    border-radius: 50%;
    z-index: 1;
}

.left {
    left: 0;
}

.right {
    left: 50%;
}

.left::before {
    content: " ";
    height: 0;
    position: absolute;
    top: 22px;
    width: 0;
    z-index: 1;
    right: 30px;
    border: medium solid var(--pastel-purple);
    border-width: 10px 0 10px 10px;
    border-color: transparent transparent transparent white;
}

.right::before {
    content: " ";
    height: 0;
    position: absolute;
    top: 22px;
    width: 0;
    z-index: 1;
    left: 30px;
    border: medium solid var(--pastel-purple);
    border-width: 10px 10px 10px 0;
    border-color: transparent white transparent transparent;
}

.right::after {
    left: -12px;
}

.timeline-content {
    padding: 20px;
    background-color: white;
    border-radius: 0.5rem;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    transition: all 0.3s;
}

.timeline-content:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 15px rgba(0,0,0,0.1);
}
/* Akhir styling timeline */

/* Styling kartu produk */
/* Styling kartu produk */
.product-card {
    perspective: 1000px;
    transition: all 0.3s;
    border: none;
    border-radius: 1rem;
    overflow: hidden;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    margin-bottom: 20px;
    display: flex;
    flex-direction: column;
    width: 100%; /* Menyesuaikan lebar kolom */
    max-width: 400px; /* Batas maksimum lebar kartu */
    min-height: 200px; /* Tinggi minimum untuk estetika */
}

.product-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 15px rgba(0,0,0,0.2);
}

.product-card .card-img-top {
    width: 100%; /* Lebar penuh sesuai kartu */
    height: auto; /* Tinggi menyesuaikan rasio aspek */
    object-fit: contain; /* Menampilkan seluruh gambar tanpa crop */
    padding: 10px; /* Jarak dari tepi kartu */
    background-color: #f8f9fa; /* Latar belakang untuk gambar kecil */
}

.product-card .card-body {
    padding: 1.5rem;
    flex-grow: 1; /* Memastikan card body mengisi ruang tersisa */
}

.product-card .price {
    color: var(--primary-color);
    font-weight: bold;
    font-size: 1.2rem;
}

.product-card .rating {
    color: #ffc107;
}

.product-card-inner {
    position: relative;
    width: 100%;
    height: 100%;
    transition: transform 0.6s;
    transform-style: preserve-3d;
}

.product-card:hover .product-card-inner {
    transform: rotateY(5deg);
}

.product-card.show-details .product-card-inner {
    transform: rotateY(180deg);
}

.product-card-front, .product-card-back {
    position: absolute;
    width: 100%;
    height: 100%;
    backface-visibility: hidden;
    border-radius: 0.5rem;
    overflow: hidden;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

.product-card-back {
    background-color: white;
    transform: rotateY(180deg);
}

/* Penyesuaian responsif untuk kartu produk */
@media (max-width: 992px) {
    .product-card {
        max-width: 350px; /* Lebar maksimum lebih kecil untuk tablet */
    }
    .product-card .card-img-top {
        padding: 8px; /* Padding lebih kecil */
    }
}

@media (max-width: 768px) {
    .product-card {
        max-width: 300px; /* Lebar maksimum untuk mobile */
    }
    .product-card .card-img-top {
        padding: 6px; /* Padding lebih kecil lagi */
    }
}

/* Penyesuaian untuk dark mode */
body[data-bs-theme="dark"] .product-card .card-img-top {
    background-color: #2d2d2d; /* Latar belakang untuk gambar di dark mode */
}
/* Akhir styling kartu produk */

/* Styling dark mode */
body[data-bs-theme="dark"] {
    background-color: #121212;
    color: #e0e0e0;
}

body[data-bs-theme="dark"] .sidebar,
body[data-bs-theme="dark"] .bottom-navbar,
body[data-bs-theme="dark"] .card,
body[data-bs-theme="dark"] .timeline-content,
body[data-bs-theme="dark"] .profile-card-front,
body[data-bs-theme="dark"] .profile-card-back,
body[data-bs-theme="dark"] .product-card-front,
body[data-bs-theme="dark"] .product-card-back {
    background-color: #1e1e1e;
    color: #e0e0e0;
}

body[data-bs-theme="dark"] .sidebar .nav-link {
    color: #e0e0e0;
}

body[data-bs-theme="dark"] .sidebar .nav-link:hover,
body[data-bs-theme="dark"] .sidebar .nav-link.active {
    background-color: #4a148c;
    color: white;
}

body[data-bs-theme="dark"] .bottom-navbar .nav-link {
    color: #e0e0e0;
}

body[data-bs-theme="dark"] .product-card .card-img-top {
    background-color: #2d2d2d; /* Latar belakang untuk gambar di dark mode */
}
/* Akhir styling dark mode */

/* Styling galeri masonry */
.masonry {
    column-count: 3;
    column-gap: 1em;
}

.masonry-item {
    display: inline-block;
    margin: 0 0 1em;
    width: 100%;
    border-radius: 0.5rem;
    overflow: hidden;
    transition: all 0.3s;
}

.masonry-item:hover {
    transform: scale(1.02);
    box-shadow: 0 8px 15px rgba(0,0,0,0.2);
}
/* Akhir styling galeri masonry */

/* Styling loading spinner */
.loading-spinner {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0,0,0,0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.spinner {
    width: 70px;
    height: 70px;
    border: 8px solid rgba(255,255,255,0.3);
    border-radius: 50%;
    border-top-color: var(--primary-color);
    animation: spin 1s ease-in-out infinite;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}
/* Akhir styling loading spinner */

/* Styling animasi kustom */
.fade-in {
    animation: fadeIn 1s;
}

@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.zoom-in {
    animation: zoomIn 0.5s;
}

@keyframes zoomIn {
    from { transform: scale(0.9); opacity: 0; }
    to { transform: scale(1); opacity: 1; }
}

.slide-up {
    animation: slideUp 0.5s;
}

@keyframes slideUp {
    from { transform: translateY(20px); opacity: 0; }
    to { transform: translateY(0); opacity: 1; }
}
/* Akhir styling animasi kustom */

/* Styling scrollbar kustom */
::-webkit-scrollbar {
    width: 10px;
}

::-webkit-scrollbar-track {
    background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
    background: var(--primary-color);
    border-radius: 10px;
}

::-webkit-scrollbar-thumb:hover {
    background: #7b1fa2;
}

body[data-bs-theme="dark"] ::-webkit-scrollbar-track {
    background: #1e1e1e;
}

body[data-bs-theme="dark"] ::-webkit-scrollbar-thumb {
    background: #7b1fa2;
}
/* Akhir styling scrollbar kustom */

/* Styling tombol kustom */
.btn-purple {
    background-color: var(--primary-color);
    color: white;
    border: none;
}

.btn-purple:hover {
    background-color: #7b1fa2;
    color: white;
}
/* Akhir styling tombol kustom */

/* Styling form kustom */
.form-control:focus, .form-select:focus {
    border-color: var(--primary-color);
    box-shadow: 0 0 0 0.25rem rgba(156, 39, 176, 0.25);
}
/* Akhir styling form kustom */

/* Styling tabs kustom */
.nav-tabs .nav-link.active {
    color: var(--primary-color);
    border-bottom: 3px solid var(--primary-color);
    font-weight: bold;
}

.nav-tabs .nav-link {
    color: var(--dark-color);
    border: none;
    padding: 0.5rem 1rem;
}

body[data-bs-theme="dark"] .nav-tabs .nav-link {
    color: #e0e0e0;
}

body[data-bs-theme="dark"] .nav-tabs .nav-link.active {
    color: var(--pastel-pink);
    border-bottom-color: var(--pastel-pink);
}
/* Akhir styling tabs kustom */

/* Styling QR code */
.qr-container {
    background: white;
    padding: 20px;
    border-radius: 0.5rem;
    display: inline-block;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
}

body[data-bs-theme="dark"] .qr-container {
    background: #2d2d2d;
}
/* Akhir styling QR code */

/* Styling item keranjang */
#cart-items img {
    max-width: 60px;
}

#cart-items input[type="number"] {
    text-align: center;
}
/* Akhir styling item keranjang */

/* Styling autentikasi */
#authSection .nav-tabs .nav-link {
    color: var(--dark-color);
    border: none;
    padding: 0.75rem 1rem;
}

#authSection .nav-tabs .nav-link.active {
    color: var(--primary-color);
    border-bottom: 3px solid var(--primary-color);
    font-weight: bold;
}

body[data-bs-theme="dark"] #authSection .nav-tabs .nav-link {
    color: #e0e0e0;
}

body[data-bs-theme="dark"] #authSection .nav-tabs .nav-link.active {
    color: var(--pastel-pink);
    border-bottom-color: var(--pastel-pink);
}
/* Akhir styling autentikasi */

/* Styling ikon header (cart dan pesanan) */
.header-icons {
    position: fixed;
    top: 10px;
    right: 10px;
    z-index: 1000;
    display: flex;
    flex-direction: column;
    gap: 8px;
}

.header-icon {
    position: relative;
    width: 32px;
    height: 32px;
    background-color: var(--primary-color);
    color: white;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    transition: all 0.3s;
}

.header-icon:hover {
    background-color: #7b1fa2;
}

.header-icon .badge {
    position: absolute;
    top: -4px;
    right: -4px;
    background-color: var(--secondary-color);
    color: white;
    border-radius: 50%;
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.6rem;
}
/* Akhir styling ikon header */

/* Styling dropdown keranjang dan pesanan */
.cart-dropdown, .orders-dropdown {
    position: absolute;
    top: 50px;
    right: 0;
    width: 300px;
    background-color: white;
    border-radius: 0.5rem;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    padding: 15px;
    z-index: 1001;
    display: none;
}

body[data-bs-theme="dark"] .cart-dropdown,
body[data-bs-theme="dark"] .orders-dropdown {
    background-color: #1e1e1e;
    border: 1px solid #333;
}

.cart-dropdown.show, .orders-dropdown.show {
    display: block;
}

.cart-dropdown h5, .orders-dropdown h5 {
    margin-bottom: 15px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
}

body[data-bs-theme="dark"] .cart-dropdown h5,
body[data-bs-theme="dark"] .orders-dropdown h5 {
    border-bottom-color: #333;
}

.cart-item, .order-item {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
    padding-bottom: 10px;
    border-bottom: 1px solid #eee;
}

body[data-bs-theme="dark"] .cart-item,
body[data-bs-theme="dark"] .order-item {
    border-bottom-color: #333;
}

.cart-item img, .order-item img {
    width: 50px;
    height: 50px;
    object-fit: cover;
    border-radius: 0.5rem;
    margin-right: 10px;
}

.cart-item-info, .order-item-info {
    flex: 1;
}

.cart-item-title, .order-item-title {
    font-weight: bold;
    margin-bottom: 5px;
}

.cart-item-price, .order-item-status {
    font-size: 0.9rem;
    color: #666;
}

body[data-bs-theme="dark"] .cart-item-price,
body[data-bs-theme="dark"] .order-item-status {
    color: #aaa;
}

.cart-dropdown-footer, .orders-dropdown-footer {
    margin-top: 15px;
    padding-top: 10px;
    border-top: 1px solid #eee;
}

body[data-bs-theme="dark"] .cart-dropdown-footer,
body[data-bs-theme="dark"] .orders-dropdown-footer {
    border-top-color: #333;
}
/* Akhir styling dropdown keranjang dan pesanan */

/* Styling modal detail produk */
.product-detail-img {
    max-height: 400px;
    object-fit: contain;
    width: 100%;
}

.star-rating {
    color: #ffc107;
    font-size: 1.2rem;
}

.review-item {
    padding: 15px;
    border-bottom: 1px solid #eee;
    margin-bottom: 15px;
}

body[data-bs-theme="dark"] .review-item {
    border-bottom-color: #333;
}

.review-author {
    font-weight: bold;
}

.review-date {
    font-size: 0.8rem;
    color: #666;
}

body[data-bs-theme="dark"] .review-date {
    color: #aaa;
}

.verified-buyer {
    background-color: #e8f5e9;
    padding: 2px 5px;
    border-radius: 3px;
    font-size: 0.7rem;
    color: #2e7d32;
    margin-left: 5px;
}

body[data-bs-theme="dark"] .verified-buyer {
    background-color: #1b5e20;
    color: #a5d6a7;
}
/* Akhir styling modal detail produk */

/* Styling halaman checkout */
.checkout-product-img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    border-radius: 0.5rem;
}
/* Akhir styling halaman checkout */

/* Styling halaman pesanan */
.order-card {
    transition: all 0.3s;
    margin-bottom: 20px;
}

.order-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 15px rgba(0,0,0,0.1);
}

.order-status {
    font-weight: bold;
}

.status-pending {
    color: #ff9800;
}

.status-processing {
    color: #2196f3;
}

.status-shipped {
    color: #4caf50;
}

.status-delivered {
    color: #8bc34a;
}

.status-cancelled {
    color: #f44336;
}
/* Akhir styling halaman pesanan */

/* Styling badge status pesanan */
.status-badge {
    padding: 0.25rem 0.5rem;
    border-radius: 0.25rem;
    font-size: 0.8rem;
    font-weight: 600;
    display: inline-block;
}

.status-pending {
    background-color: #fff3cd;
    color: #856404;
}

.status-processing {
    background-color: #cce5ff;
    color: #004085;
}

.status-shipped {
    background-color: #d4edda;
    color: #155724;
}

.status-delivered {
    background-color: #d1ecf1;
    color: #0c5460;
}

.status-cancelled {
    background-color: #f8d7da;
    color: #721c24;
}
/* Akhir styling badge status pesanan */

/* Styling animasi flip produk */
.flip-product {
    transform: rotateY(180deg);
}
/* Akhir styling animasi flip produk */

/* Penyesuaian responsif */
@media (max-width: 992px) {
    /* Menyesuaikan sidebar untuk mobile */
    .sidebar {
        transform: translateX(-100%);
        display: none;
    }

    /* Menghilangkan tombol toggle (ikon grip lines) di mobile */
    .navbar-toggler {
        display: none;
    }

    .main-content {
        margin-left: 0;
    }

    .bottom-navbar {
        display: flex;
    }

    /* Penyesuaian timeline untuk mobile */
    .timeline::after {
        left: 31px;
    }

    .timeline-item {
        width: 100%;
        padding-left: 70px;
        padding-right: 25px;
    }

    .timeline-item::before {
        left: 60px;
        border: medium solid var(--pastel-purple);
        border-width: 10px 10px 10px 0;
        border-color: transparent white transparent transparent;
    }

    .left::after, .right::after {
        left: 18px;
    }

    .right {
        left: 0%;
    }

    .masonry {
        column-count: 2;
    }

    .product-card .card-img-top {
        max-height: 200px;
        padding: 8px;
    }
}

@media (max-width: 768px) {
    .masonry {
        column-count: 1;
    }

    .product-card .card-img-top {
        max-height: 150px;
        padding: 5px;
    }
}
/* Akhir penyesuaian responsif */

/* Styling tombol hapus pesanan */
.btn-remove-order {
    background-color: #f44336;
    color: white;
    border: none;
    padding: 0.3rem 0.6rem;
    font-size: 0.8rem;
    border-radius: 0.25rem;
    transition: background-color 0.3s ease;
}

.btn-remove-order:hover {
    background-color: #d32f2f;
}

body[data-bs-theme="dark"] .btn-remove-order {
    background-color: #c62828;
}

body[data-bs-theme="dark"] .btn-remove-order:hover {
    background-color: #b71c1c;
}

/* Styling khusus untuk modal konfirmasi pembayaran */
#confirmPaymentModal .modal-dialog {
    max-width: 500px;
    margin: 1.75rem auto;
    transition: transform 0.3s ease-out;
}

#confirmPaymentModal .modal-content {
    border-radius: 0.75rem;
    border: 1px solid #DDD6FE;
    box-shadow: 0 4px 20px rgba(109, 40, 217, 0.15);
    background: linear-gradient(180deg, #FFFFFF 0%, #F5F3FF 100%);
}

#confirmPaymentModal .modal-header {
    background-color: #F5F3FF;
    border-bottom: 1px solid #DDD6FE;
    padding: 1.25rem;
    color: #2D1B4E;
}

#confirmPaymentModal .modal-title {
    font-size: 1.5rem;
    font-weight: 600;
    line-height: 1.4;
}

#confirmPaymentModal .modal-body {
    padding: 1.5rem;
    font-size: 1.1rem;
    color: #2D1B4E;
    line-height: 1.6;
}

#confirmPaymentModal .modal-body span#confirmOrderId {
    color: var(--primary-color, #6D28D9);
    font-weight: 500;
}

#confirmPaymentModal .modal-footer {
    border-top: 1px solid #DDD6FE;
    padding: 1rem;
    display: flex;
    gap: 0.5rem;
}

#confirmPaymentModal .btn-success {
    background-color: var(--primary-color, #6D28D9);
    border-color: var(--primary-color, #6D28D9);
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    font-weight: 500;
    border-radius: 0.5rem;
    transition: all 0.3s ease;
}

#confirmPaymentModal .btn-success:hover,
#confirmPaymentModal .btn-success:focus {
    background-color: var(--secondary-color, #A855F7);
    border-color: var(--secondary-color, #A855F7);
    box-shadow: 0 2px 8px rgba(168,85,247,0.3);
    transform: translateY(-1px);
}

#confirmPaymentModal .btn-secondary {
    background-color: #EDE9FE;
    border-color: #DDD6FE;
    color: #2D1B4E;
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
    font-weight: 500;
    border-radius: 0.5rem;
    transition: all 0.3s ease;
}

#confirmPaymentModal .btn-secondary:hover,
#confirmPaymentModal .btn-secondary:focus {
    background-color: #DDD6FE;
    border-color: #6D28D9;
    color: #6D28D9;
    transform: translateY(-1px);
}

#confirmPaymentModal .btn-close {
    filter: invert(20%) sepia(50%) saturate(500%) hue-rotate(260deg);
    opacity: 0.7;
    transition: opacity 0.2s ease;
}

#confirmPaymentModal .btn-close:hover {
    opacity: 1;
}

/* Responsivitas untuk perangkat mobile */
@media (max-width: 576px) {
    #confirmPaymentModal .modal-dialog {
        margin: 0.5rem;
        max-width: 100%;
    }

    #confirmPaymentModal .modal-content {
        border-radius: 0.5rem;
        box-shadow: 0 2px 10px rgba(109, 40, 217, 0.1);
    }

    #confirmPaymentModal .modal-header {
        padding: 1rem;
    }

    #confirmPaymentModal .modal-title {
        font-size: 1.25rem;
    }

    #confirmPaymentModal .modal-body {
        padding: 1.25rem;
        font-size: 1rem;
    }

    #confirmPaymentModal .modal-footer {
        padding: 0.75rem;
        flex-direction: column;
        gap: 0.75rem;
    }

    #confirmPaymentModal .btn-success,
    #confirmPaymentModal .btn-secondary {
        width: 100%;
        padding: 0.65rem;
        font-size: 0.95rem;
    }
}

/* Animasi saat modal muncul */
@keyframes modalFadeIn {
    from {
        opacity: 0;
        transform: scale(0.95);
    }
    to {
        opacity: 1;
        transform: scale(1);
    }
}

#confirmPaymentModal .modal-dialog {
    animation: modalFadeIn 0.3s ease-out;
}
/* Akhir styling khusus untuk modal konfirmasi pembayaran */    </style>
</head>
<body>
    <!-- Loading Spinner -->
    <div class="loading-spinner">
        <div class="spinner"></div>
    </div>

    <!-- Cart and Orders Icons -->
    <div class="header-icons">
        <div class="header-icon" id="cartIcon">
            <i class="bi bi-cart"></i>
            <span class="badge" id="cartCount">0</span>
            <div class="cart-dropdown" id="cartDropdown">
                <h5>Keranjang Belanja</h5>
                <div id="cartDropdownContent">
                    <p class="text-center">Keranjang belanja kosong</p>
                </div>
                <div class="cart-dropdown-footer">
                    <a href="#cart" class="btn btn-sm btn-purple w-100">Lihat Keranjang</a>
                </div>
            </div>
        </div>
        <div class="header-icon" id="ordersIcon">
            <i class="bi bi-bag"></i>
            <span class="badge" id="ordersCount">0</span>
            <div class="orders-dropdown" id="ordersDropdown">
                <h5>Pesanan Terakhir</h5>
                <div id="ordersDropdownContent">
                    <p class="text-center">Belum ada pesanan</p>
                </div>
                <div class="orders-dropdown-footer">
                    <a href="#orders" class="btn btn-sm btn-purple w-100">Lihat Semua Pesanan</a>
                </div>
            </div>
        </div>
    </div>

    <!-- Desktop Sidebar -->
    <div class="sidebar sidebar-nav d-none d-lg-block">
        <div class="p-4">
            <a class="navbar-brand" href="#dashboard">3 X X X D O R R</a>
        </div>
        <ul class="nav flex-column">
            <li class="nav-item">
                <a class="nav-link active" href="#dashboard">
                    <i class="bi bi-speedometer2"></i> Dashboard
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#about">
                    <i class="bi bi-person"></i> Tentang
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#products">
                    <i class="bi bi-bag"></i> Produk
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#contact">
                    <i class="bi bi-envelope"></i> Kontak
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#account">
                    <i class="bi bi-person-circle"></i> Akun
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#cart">
                    <i class="bi bi-cart"></i> Keranjang
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#orders">
                    <i class="bi bi-bag-check"></i> Pesanan
                </a>
            </li>
        </ul>
        <div class="position-absolute bottom-0 start-0 p-3 w-100">
            <div class="form-check form-switch">
                <input class="form-check-input" type="checkbox" id="darkModeToggle">
                <label class="form-check-label" for="darkModeToggle">Mode Gelap</label>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Mobile Header -->
        <header class="d-lg-none d-block mb-4">
            <nav class="navbar navbar-expand-lg bg-body-tertiary">
                <div class="container-fluid">
                    <a class="navbar-brand" href="#dashboard">3 X X X D O R R</a>
                    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarNav">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a class="nav-link" href="#dashboard">Dashboard</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#about">Tentang</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#products">Produk</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#contact">Kontak</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#account">Akun</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#cart">Keranjang</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="#orders">Pesanan</a>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>

      <!-- Dashboard Section -->
<section id="dashboard" class="page-section py-5">
    <div class="container">
        <h2 class="mb-3 text-center animate__animated fade-in" style="background: linear-gradient(45deg, var(--primary-color), var(--neon-purple), var(--pastel-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Pusat Kendali E-commerce</h2>
        <p class="text-center text-muted mb-5 small animate__animated slide-up">Pantau performa bisnis Anda secara real-time dengan wawasan mendalam, kontrol cerdas, dan antarmuka premium yang memanjakan mata.</p>
        
        <!-- Notifikasi Real-time -->
        <div class="alert alert-success alert-dismissible fade show animate__animated zoom-in mb-4 d-none" id="newOrderNotification" role="alert">
            <strong>Pesanan Baru!</strong> Pesanan baru telah diterima. Periksa daftar pesanan untuk detail.
            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
        </div>

        <!-- Key Metrics -->
        <div class="row mb-5 g-3">
            <div class="col-12 col-md-6 col-lg-3 animate__animated zoom-in">
                <div class="card shadow-sm h-100 premium-card">
                    <div class="card-body text-center">
                        <i class="bi bi-currency-dollar display-4 animate__animated pulse animate__infinite" style="color: var(--primary-color);"></i>
                        <h5 class="card-title mt-2" style="color: var(--primary-color);">Pendapatan Total</h5>
                        <h3 style="color: var(--primary-color);" id="totalRevenue">Rp0</h3>
                        <p class="text-muted small" id="revenueDescription">Pendapatan dari semua pesanan yang berhasil diselesaikan.</p>
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-6 col-lg-3 animate__animated zoom-in animate__delay-1s">
                <div class="card shadow-sm h-100 premium-card">
                    <div class="card-body text-center">
                        <i class="bi bi-cart-check display-4 animate__animated pulse animate__infinite" style="color: var(--secondary-color);"></i>
                        <h5 class="card-title mt-2" style="color: var(--secondary-color);">Jumlah Pesanan</h5>
                        <h3 style="color: var(--secondary-color);" id="orderCount">0</h3>
                        <p class="text-muted small" id="orderDescription">Total pesanan yang diterima hingga saat ini.</p>
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-6 col-lg-3 animate__animated zoom-in animate__delay-2s">
                <div class="card shadow-sm h-100 premium-card">
                    <div class="card-body text-center">
                        <i class="bi bi-people display-4 animate__animated pulse animate__infinite" style="color: var(--neon-purple);"></i>
                        <h5 class="card-title mt-2" style="color: var(--neon-purple);">Basis Pelanggan</h5>
                        <h3 style="color: var(--neon-purple);" id="customerCount">0</h3>
                        <p class="text-muted small" id="customerDescription">Jumlah pelanggan unik yang telah berbelanja.</p>
                    </div>
                </div>
            </div>
            <div class="col-12 col-md-6 col-lg-3 animate__animated zoom-in animate__delay-3s">
                <div class="card shadow-sm h-100 premium-card">
                    <div class="card-body text-center">
                        <i class="bi bi-star display-4 animate__animated pulse animate__infinite" style="color: var(--pastel-pink);"></i>
                        <h5 class="card-title mt-2" style="color: var(--pastel-pink);">Kepuasan Pelanggan</h5>
                        <h3 style="color: var(--pastel-pink);" id="satisfactionRating">0.0</h3>
                        <p class="text-muted small" id="satisfactionDescription">Rata-rata rating berdasarkan ulasan pelanggan.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Dashboard Content -->
        <div class="row mb-5">
            <!-- Recent Orders -->
            <div class="col-12 col-lg-8">
                <div class="card shadow-sm mb-4 premium-card">
                    <div class="card-header bg-white border-bottom d-flex justify-content-between align-items-center">
                        <h5 class="mb-0" style="background: linear-gradient(45deg, var(--primary-color), var(--neon-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Aktivitas Pesanan Terbaru</h5>
                        <div class="d-flex gap-2">
                            <select class="form-select form-select-sm" id="orderStatusFilter" style="border-color: var(--primary-color);">
                                <option value="">Semua Status</option>
                                <option value="pending">Menunggu Pembayaran</option>
                                <option value="processing">Diproses</option>
                                <option value="shipped">Dikirim</option>
                                <option value="delivered">Selesai</option>
                                <option value="cancelled">Dibatalkan</option>
                            </select>
                            <a href="#" class="btn btn-sm btn-purple" onclick="showSection('orders')">Lihat Semua Pesanan</a>
                        </div>
                    </div>
                    <div class="card-body p-0">
                        <div class="table-responsive">
                            <table class="table table-hover mb-0">
                                <thead style="background-color: var(--pastel-purple);">
                                    <tr>
                                        <th>ID Pesanan</th>
                                        <th>Pelanggan</th>
                                        <th>Produk</th>
                                        <th>Jumlah</th>
                                        <th>Status</th>
                                        <th>Tanggal</th>
                                    </tr>
                                </thead>
                                <tbody id="recentOrdersTable"></tbody>
                            </table>
                        </div>
                    </div>
                    <div class="card-footer bg-white text-muted small animate__animated fade-in">
                        Kelola pesanan Anda dengan pelacakan mendetail dan pembaruan status untuk operasi yang lebih efisien dan terorganisir.
                    </div>
                </div>
            </div>
            <!-- Quick Actions -->
            <div class="col-12 col-lg-4">
                <div class="card shadow-sm mb-4 premium-card">
                    <div class="card-header bg-white border-bottom">
                        <h5 class="mb-0" style="background: linear-gradient(45deg, var(--primary-color), var(--neon-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Pusat Aksi Cepat</h5>
                    </div>
                    <div class="card-body">
                        <div class="d-grid gap-2">
                            <button class="btn btn-purple animate__animated pulse animate__infinite" onclick="showSection('products')"><i class="bi bi-plus-circle me-2"></i>Tambah Produk Baru</button>
                            <button class="btn animate__animated pulse animate__infinite" style="background-color: var(--pastel-purple); color: var(--primary-color);"><i class="bi bi-box-seam me-2"></i>Kelola Inventaris</button>
                            <button class="btn animate__animated pulse animate__infinite" style="background-color: var(--pastel-pink); color: var(--secondary-color);" onclick="showSection('account')"><i class="bi bi-person-plus me-2"></i>Tambah Pelanggan</button>
                            <button class="btn animate__animated pulse animate__infinite" style="background-color: var(--neon-purple); color: white;"><i class="bi bi-megaphone me-2"></i>Buat Promosi Baru</button>
                        </div>
                    </div>
                    <div class="card-footer bg-white text-muted small animate__animated fade-in">
                        Akses cepat untuk mengelola operasional bisnis Anda dengan efisiensi dan gaya premium.
                    </div>
                </div>
            </div>
        </div>

        <!-- Sales and Analytics -->
        <div class="row mb-5">
            <!-- Sales Chart -->
            <div class="col-12 col-lg-8">
                <div class="card shadow-sm premium-card">
                    <div class="card-header bg-white border-bottom d-flex justify-content-between align-items-center">
                        <h5 class="mb-0" style="background: linear-gradient(45deg, var(--primary-color), var(--neon-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Ikhtisar Performa Penjualan</h5>
                        <select class="form-select w-auto" id="salesPeriodFilter" style="border-color: var(--primary-color);">
                            <option value="7">7 Hari Terakhir</option>
                            <option value="30">30 Hari Terakhir</option>
                            <option value="90">90 Hari Terakhir</option>
                        </select>
                    </div>
                    <div class="card-body">
                        <canvas id="salesChart"></canvas>
                    </div>
                    <div class="card-footer bg-white text-muted small animate__animated fade-in">
                        Visualisasikan tren penjualan Anda dengan grafik interaktif yang dioptimalkan untuk pengambilan keputusan strategis di semua perangkat.
                    </div>
                </div>
            </div>
            <!-- Top Products -->
            <div class="col-12 col-lg-4">
                <div class="card shadow-sm premium-card">
                    <div class="card-header bg-white border-bottom">
                        <h5 class="mb-0" style="background: linear-gradient(45deg, var(--primary-color), var(--neon-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Produk Terlaris</h5>
                    </div>
                    <div class="card-body">
                        <ul class="list-group list-group-flush" id="topProductsList"></ul>
                    </div>
                    <div class="card-footer bg-white text-muted small animate__animated fade-in">
                        Kenali produk terlaris Anda untuk mengoptimalkan strategi inventaris dan pemasaran.
                    </div>
                </div>
            </div>
        </div>

        <!-- Customer Feedback -->
        <h4 class="mb-3 animate__animated fade-in" style="background: linear-gradient(45deg, var(--primary-color), var(--neon-purple)); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">Sorotan Umpan Balik Pelanggan</h4>
        <p class="text-muted mb-4 small animate__animated slide-up">Pelajari apa yang dikatakan pelanggan untuk meningkatkan pengalaman mereka dan memperkuat loyalitas merek.</p>
        <div class="row g-3" id="customerFeedback"></div>
    </div>
</section>

        <!-- About Section -->
    <section id="about" class="page-section">
        <canvas id="threeCanvas"></canvas>
        <div class="container position-relative">
            <h2 class="section-title animate__animated animate__fadeInDown">Tentang Kami</h2>

            <!-- Brand Introduction -->
            <div class="row mb-5">
                <div class="col-lg-6 animate__animated animate__fadeInLeft">
                    <div class="about-card">
                        <h4 class="card-title text-uppercase mb-4" style="color: var(--primary-color);">Kisah Kami</h4>
                        <p>Selamat datang di [Nama Brand], destinasi e-commerce premium yang menghadirkan produk berkualitas tinggi dengan pengalaman belanja yang tak tertandingi. Didirikan pada tahun 2020, kami berkomitmen untuk menyediakan koleksi eksklusif yang memadukan inovasi, estetika, dan fungsionalitas.</p>
                        <p>Visi kami adalah menciptakan hubungan yang bermakna dengan pelanggan melalui produk yang tidak hanya memenuhi kebutuhan, tetapi juga menginspirasi gaya hidup. Dari teknologi mutakhir hingga aksesori elegan, setiap item dipilih dengan cermat untuk memastikan kepuasan Anda.</p>
                    </div>
                </div>
                <div class="col-lg-6 animate__animated animate__fadeInRight">
                    <div class="about-card">
                        <h4 class="card-title text-uppercase mb-4" style="color: var(--primary-color);">Kekuatan Kami</h4>
                        <div class="mb-3">
                            <h6>Kurasi Produk Premium</h6>
                            <div class="progress">
                                <div class="progress-bar" role="progressbar" style="width: 95%;"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <h6>Pengalaman Pelanggan</h6>
                            <div class="progress">
                                <div class="progress-bar bg-success" role="progressbar" style="width: 90%;"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <h6>Inovasi E-Commerce</h6>
                            <div class="progress">
                                <div class="progress-bar bg-info" role="progressbar" style="width: 85%;"></div>
                            </div>
                        </div>
                        <div class="mb-3">
                            <h6>Keberlanjutan</h6>
                            <div class="progress">
                                <div class="progress-bar bg-warning" role="progressbar" style="width: 80%;"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Timeline -->
            <h4 class="mb-4 text-center animate__animated animate__fadeIn">Perjalanan Kami</h4>
            <div class="row g-4">
                <div class="col-md-4 animate__animated animate__zoomIn">
                    <div class="timeline-card text-center">
                        <div class="display-1 text-primary mb-3"><i class="bi bi-rocket-takeoff"></i></div>
                        <h5>Pendirian</h5>
                        <p>Didirikan pada tahun 2020 dengan misi menghadirkan produk premium ke pasar global.</p>
                    </div>
                </div>
                <div class="col-md-4 animate__animated animate__zoomIn animate__delay-1s">
                    <div class="timeline-card text-center">
                        <div class="display-1 text-success mb-3"><i class="bi bi-globe"></i></div>
                        <h5>Ekspansi Global</h5>
                        <p>Mulai menjangkau pelanggan di lebih dari 50 negara pada tahun 2022.</p>
                    </div>
                </div>
                <div class="col-md-4 animate__animated animate__zoomIn animate__delay-2s">
                    <div class="timeline-card text-center">
                        <div class="display-1 text-info mb-3"><i class="bi bi-award"></i></div>
                        <h5>Penghargaan</h5>
                        <p>Menerima penghargaan "E-Commerce of the Year" pada tahun 2024.</p>
                    </div>
                </div>
            </div>

           
            <!-- CTA -->
            <div class="text-center mt-5 animate__animated animate__pulse animate__infinite">
                <a href="#products" class="btn cta-button">Jelajahi Koleksi Kami</a>
            </div>
        </div>
    </section>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.5/ScrollTrigger.min.js"></script>
    <script>
        // Three.js 3D Animation
        const canvas = document.getElementById('threeCanvas');
        const scene = new THREE.Scene();
        const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
        const renderer = new THREE.WebGLRenderer({ canvas, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);

        const geometry = new THREE.TorusKnotGeometry(10, 3, 100, 16);
        const material = new THREE.MeshBasicMaterial({ color: 0xd4af37, wireframe: true });
        const torusKnot = new THREE.Mesh(geometry, material);
        scene.add(torusKnot);

        camera.position.z = 30;

        function animate() {
            requestAnimationFrame(animate);
            torusKnot.rotation.x += 0.01;
            torusKnot.rotation.y += 0.01;
            renderer.render(scene, camera);
        }
        animate();

        // GSAP Scroll Animations
        gsap.registerPlugin(ScrollTrigger);

        gsap.from('.section-title', {
            scrollTrigger: {
                trigger: '.section-title',
                start: 'top 80%',
            },
            opacity: 0,
            y: -100,
            duration: 1.5,
            ease: 'power3.out'
        });

        gsap.from('.about-card', {
            scrollTrigger: {
                trigger: '.about-card',
                start: 'top 80%',
            },
            opacity: 0,
            scale: 0.8,
            stagger: 0.3,
            duration: 1,
            ease: 'back.out(1.7)'
        });

        gsap.from('.timeline-card', {
            scrollTrigger: {
                trigger: '.timeline-card',
                start: 'top 80%',
            },
            opacity: 0,
            x: -100,
            stagger: 0.3,
            duration: 1,
            ease: 'power2.out'
        });

        gsap.from('.product-card', {
            scrollTrigger: {
                trigger: '.product-showcase',
                start: 'top 80%',
            },
            opacity: 0,
            y: 50,
            stagger: 0.3,
            duration: 1,
            ease: 'power3.out'
        });

        // Responsive Canvas Resize
        window.addEventListener('resize', () => {
            renderer.setSize(window.innerWidth, window.innerHeight);
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
        });
    </script>
    <style>
       :root {
    --primary-color: #9c27b0;
    --secondary-color: #e91e63;
    --dark-color: #212529;
    --light-color: #f8f9fa;
    --pastel-purple: #d1c4e9;
    --neon-purple: #b388ff;
    --pastel-pink: #f8bbd0;
}

        body {
            background-color: var(--secondary-color);
            color: var(--text-color);
            font-family: 'Playfair Display', serif;
            overflow-x: hidden;
        }

        #about {
            padding: 100px 0;
            position: relative;
            background: linear-gradient(135deg, #2c2c2c 0%, #1a1a1a 100%);
        }

        .section-title {
            font-size: 3rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 60px;
            color: var(--primary-color);
            text-shadow: 0 0 20px rgba(212, 175, 55, 0.5);
        }

        .about-card {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--primary-color);
            border-radius: 15px;
            padding: 30px;
            transition: transform 0.5s ease, box-shadow 0.5s ease;
            backdrop-filter: blur(10px);
        }

        .about-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
        }

        .progress-bar {
            background-color: var(--primary-color) !important;
            transition: width 1s ease-in-out;
        }

        .timeline-card {
            background: rgba(255, 255, 255, 0.1);
            border-left: 4px solid var(--primary-color);
            padding: 20px;
            border-radius: 10px;
            transition: transform 0.5s ease;
        }

        .timeline-card:hover {
            transform: scale(1.05);
        }

       .cta-button {
            background: var(--primary-color);
            color: var(--secondary-color);
            padding: 15px 30px;
            border-radius: 50px;
            font-weight: 600;
            transition: all 0.3s ease;
        }

        .cta-button:hover {
            background: var(--text-color);
            color: var(--primary-color);
            transform: translateY(-5px);
        }

        #threeCanvas {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 0;
            opacity: 0.3;
        }

        .parallax-bg {
            background-attachment: fixed;
            background-size: cover;
            background-position: center;
        }

        @media (max-width: 768px) {
            .section-title {
                font-size: 2rem;
            }
            .about-card {
                padding: 20px;
            }
        }
    </style>

        <!-- Products Section -->
        <section id="products" class="page-section d-none">
            <h2 class="mb-4 animate__animated animate__fadeIn">Produk Kami</h2>
            
            <ul class="nav nav-tabs mb-4" id="productCategoryTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button class="nav-link active" id="all-tab" data-bs-toggle="tab" data-bs-target="#all" type="button" role="tab">Semua</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="electronics-tab" data-bs-toggle="tab" data-bs-target="#electronics" type="button" role="tab">Elektronik</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="clothing-tab" data-bs-toggle="tab" data-bs-target="#clothing" type="button" role="tab">Pakaian</button>
                </li>
                <li class="nav-item" role="presentation">
                    <button class="nav-link" id="food-tab" data-bs-toggle="tab" data-bs-target="#food" type="button" role="tab">Makanan</button>
                </li>
            </ul>
            
            <div class="tab-content" id="productCategoryTabContent">
                <div class="tab-pane fade show active" id="all" role="tabpanel">
                    <div class="row">
                        <div class="col-md-4 mb-4 animate__animated animate__fadeIn">
                            <div class="product-card card">
                                <img src="https://i.pinimg.com/474x/0a/f9/3c/0af93cb70a6806791f20f608274bbeac.jpg" class="card-img-top" alt="Product 1">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <h5 class="card-title mb-1">Smartphone X1</h5>
                                        <span class="price">Rp 5.999.000</span>
                                    </div>
                                    <div class="rating mb-2">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-half"></i>
                                        <small class="text-muted ms-1">(128)</small>
                                    </div>
                                    <p class="card-text">Smartphone flagship dengan kamera 108MP dan baterai 5000mAh.</p>
                                    <div class="d-flex justify-content-between">
                                        <button class="btn btn-sm btn-outline-secondary" onclick="showProductDetails(1)">Lihat Detail</button>
                                        <button class="btn btn-sm btn-purple" onclick="addToCart(1)"><i class="bi bi-cart-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4 animate__animated animate__fadeIn">
                            <div class="product-card card">
                                <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="Product 2">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <h5 class="card-title mb-1">Laptop Pro</h5>
                                        <span class="price">Rp 12.499.000</span>
                                    </div>
                                    <div class="rating mb-2">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star"></i>
                                        <small class="text-muted ms-1">(87)</small>
                                    </div>
                                    <p class="card-text">Laptop performa tinggi dengan prosesor i7 dan GPU dedicated.</p>
                                    <div class="d-flex justify-content-between">
                                        <button class="btn btn-sm btn-outline-secondary" onclick="showProductDetails(2)">Lihat Detail</button>
                                        <button class="btn btn-sm btn-purple" onclick="addToCart(2)"><i class="bi bi-cart-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4 animate__animated animate__fadeIn">
                            <div class="product-card card">
                                <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="Product 3">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <h5 class="card-title mb-1">Kaos Premium</h5>
                                        <span class="price">Rp 199.000</span>
                                    </div>
                                    <div class="rating mb-2">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <small class="text-muted ms-1">(256)</small>
                                    </div>
                                    <p class="card-text">Kaos katun premium dengan desain eksklusif dan nyaman dipakai.</p>
                                    <div class="d-flex justify-content-between">
                                        <button class="btn btn-sm btn-outline-secondary" onclick="showProductDetails(3)">Lihat Detail</button>
                                        <button class="btn btn-sm btn-purple" onclick="addToCart(3)"><i class="bi bi-cart-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4 animate__animated animate__fadeIn">
                            <div class="product-card card">
                                <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="Product 4">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <h5 class="card-title mb-1">Kopi Specialty</h5>
                                        <span class="price">Rp 125.000</span>
                                    </div>
                                    <div class="rating mb-2">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-half"></i>
                                        <small class="text-muted ms-1">(342)</small>
                                    </div>
                                    <p class="card-text">Kopi arabika specialty dari perkebunan di Toraja, Sulawesi.</p>
                                    <div class="d-flex justify-content-between">
                                        <button class="btn btn-sm btn-outline-secondary" onclick="showProductDetails(4)">Lihat Detail</button>
                                        <button class="btn btn-sm btn-purple" onclick="addToCart(4)"><i class="bi bi-cart-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4 animate__animated animate__fadeIn">
                            <div class="product-card card">
                                <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="Product 5">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <h5 class="card-title mb-1">Smart Watch</h5>
                                        <span class="price">Rp 1.799.000</span>
                                    </div>
                                    <div class="rating mb-2">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star"></i>
                                        <i class="bi bi-star"></i>
                                        <small class="text-muted ms-1">(54)</small>
                                    </div>
                                    <p class="card-text">Smartwatch dengan fitur kesehatan dan notifikasi smartphone.</p>
                                    <div class="d-flex justify-content-between">
                                        <button class="btn btn-sm btn-outline-secondary" onclick="showProductDetails(5)">Lihat Detail</button>
                                        <button class="btn btn-sm btn-purple" onclick="addToCart(5)"><i class="bi bi-cart-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4 animate__animated animate__fadeIn">
                            <div class="product-card card">
                                <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="Product 6">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <h5 class="card-title mb-1">Kue Kering</h5>
                                        <span class="price">Rp 75.000</span>
                                    </div>
                                    <div class="rating mb-2">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <small class="text-muted ms-1">(412)</small>
                                    </div>
                                    <p class="card-text">Kue kering homemade dengan bahan premium tanpa pengawet.</p>
                                    <div class="d-flex justify-content-between">
                                        <button class="btn btn-sm btn-outline-secondary" onclick="showProductDetails(6)">Lihat Detail</button>
                                        <button class="btn btn-sm btn-purple" onclick="addToCart(6)"><i class="bi bi-cart-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="electronics" role="tabpanel">
                    <div class="row">
                        <div class="col-md-4 mb-4">
                            <div class="product-card card">
                                <img src="https://i.pinimg.com/474x/0a/f9/3c/0af93cb70a6806791f20f608274bbeac.jpg" class="card-img-top" alt="Product 1">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <h5 class="card-title mb-1">Smartphone X1</h5>
                                        <span class="price">Rp 5.999.000</span>
                                    </div>
                                    <div class="rating mb-2">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-half"></i>
                                        <small class="text-muted ms-1">(128)</small>
                                    </div>
                                    <p class="card-text">Smartphone flagship dengan kamera 108MP dan baterai 5000mAh.</p>
                                    <div class="d-flex justify-content-between">
                                        <button class="btn btn-sm btn-outline-secondary" onclick="showProductDetails(1)">Lihat Detail</button>
                                        <button class="btn btn-sm btn-purple" onclick="addToCart(1)"><i class="bi bi-cart-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="product-card card">
                                <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="Product 2">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <h5 class="card-title mb-1">Laptop Pro</h5>
                                        <span class="price">Rp 12.499.000</span>
                                    </div>
                                    <div class="rating mb-2">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star"></i>
                                        <small class="text-muted ms-1">(87)</small>
                                    </div>
                                    <p class="card-text">Laptop performa tinggi dengan prosesor i7 dan GPU dedicated.</p>
                                    <div class="d-flex justify-content-between">
                                        <button class="btn btn-sm btn-outline-secondary" onclick="showProductDetails(2)">Lihat Detail</button>
                                        <button class="btn btn-sm btn-purple" onclick="addToCart(2)"><i class="bi bi-cart-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="product-card card">
                                <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="Product 5">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <h5 class="card-title mb-1">Smart Watch</h5>
                                        <span class="price">Rp 1.799.000</span>
                                    </div>
                                    <div class="rating mb-2">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star"></i>
                                        <i class="bi bi-star"></i>
                                        <small class="text-muted ms-1">(54)</small>
                                    </div>
                                    <p class="card-text">Smartwatch dengan fitur kesehatan dan notifikasi smartphone.</p>
                                    <div class="d-flex justify-content-between">
                                        <button class="btn btn-sm btn-outline-secondary" onclick="showProductDetails(5)">Lihat Detail</button>
                                        <button class="btn btn-sm btn-purple" onclick="addToCart(5)"><i class="bi bi-cart-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="clothing" role="tabpanel">
                    <div class="row">
                        <div class="col-md-4 mb-4">
                            <div class="product-card card">
                                <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="Product 3">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <h5 class="card-title mb-1">Kaos Premium</h5>
                                        <span class="price">Rp 199.000</span>
                                    </div>
                                    <div class="rating mb-2">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <small class="text-muted ms-1">(256)</small>
                                    </div>
                                    <p class="card-text">Kaos katun premium dengan desain eksklusif dan nyaman dipakai.</p>
                                    <div class="d-flex justify-content-between">
                                        <button class="btn btn-sm btn-outline-secondary" onclick="showProductDetails(3)">Lihat Detail</button>
                                        <button class="btn btn-sm btn-purple" onclick="addToCart(3)"><i class="bi bi-cart-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="food" role="tabpanel">
                    <div class="row">
                        <div class="col-md-4 mb-4">
                            <div class="product-card card">
                                <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="Product 4">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <h5 class="card-title mb-1">Kopi Specialty</h5>
                                        <span class="price">Rp 125.000</span>
                                    </div>
                                    <div class="rating mb-2">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-half"></i>
                                        <small class="text-muted ms-1">(342)</small>
                                    </div>
                                    <p class="card-text">Kopi arabika specialty dari perkebunan di Toraja, Sulawesi.</p>
                                    <div class="d-flex justify-content-between">
                                        <button class="btn btn-sm btn-outline-secondary" onclick="showProductDetails(4)">Lihat Detail</button>
                                        <button class="btn btn-sm btn-purple" onclick="addToCart(4)"><i class="bi bi-cart-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-4 mb-4">
                            <div class="product-card card">
                                <img src="https://via.placeholder.com/300x200" class="card-img-top" alt="Product 6">
                                <div class="card-body">
                                    <div class="d-flex justify-content-between align-items-start">
                                        <h5 class="card-title mb-1">Kue Kering</h5>
                                        <span class="price">Rp 75.000</span>
                                    </div>
                                    <div class="rating mb-2">
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <i class="bi bi-star-fill"></i>
                                        <small class="text-muted ms-1">(412)</small>
                                    </div>
                                    <p class="card-text">Kue kering homemade dengan bahan premium tanpa pengawet.</p>
                                    <div class="d-flex justify-content-between">
                                        <button class="btn btn-sm btn-outline-secondary" onclick="showProductDetails(6)">Lihat Detail</button>
                                        <button class="btn btn-sm btn-purple" onclick="addToCart(6)"><i class="bi bi-cart-plus"></i></button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Contact Section -->
        <section id="contact" class="page-section d-none">
            <h2 class="mb-4 animate__animated animate__fadeIn">Hubungi Kami</h2>
            
            <div class="row">
                <div class="col-lg-6 mb-4 animate__animated animate__fadeInLeft">
                    <div class="card h-100">
                        <div class="card-body">
                            <h4 class="card-title mb-4">Kirim Pesan</h4>
                            <form id="contactForm">
                                <div class="mb-3">
                                    <label for="contactName" class="form-label">Nama</label>
                                    <input type="text" class="form-control" id="contactName" required>
                                </div>
                                <div class="mb-3">
                                    <label for="contactEmail" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="contactEmail" required>
                                </div>
                                <div class="mb-3">
                                    <label for="contactMessage" class="form-label">Pesan</label>
                                    <textarea class="form-control" id="contactMessage" rows="4" required></textarea>
                                </div>
                                <button type="submit" class="btn btn-purple">Kirim Pesan</button>
                            </form>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6 animate__animated animate__fadeInRight">
                    <div class="card h-100">
                        <div class="card-body">
                            <h4 class="card-title mb-4">Info Kontak</h4>
                            <div class="mb-4">
                                <h5><i class="bi bi-geo-alt-fill me-2 text-primary"></i> Alamat</h5>
                                <p>Jl. Contoh No. 123, Kelurahan Sample, Kecamatan Demo, Jakarta Selatan, DKI Jakarta 12345</p>
                                
                                <div class="ratio ratio-16x9 mb-3">
                                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3966.521260322283!2d106.8195613507864!3d-6.194741395493371!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2e69f5390917b759%3A0x6b45e67356080477!2sMonumen%20Nasional!5e0!3m2!1sen!2sid!4v1630418952701!5m2!1sen!2sid" style="border:0;" allowfullscreen="" loading="lazy"></iframe>
                                </div>
                            </div>
                            <div class="mb-4">
                                <h5><i class="bi bi-telephone-fill me-2 text-success"></i> Telepon</h5>
                                <p>+62 812 3456 7890</p>
                            </div>
                            <div class="mb-4">
                                <h5><i class="bi bi-envelope-fill me-2 text-danger"></i> Email</h5>
                                <p>info@example.com</p>
                            </div>
                            <div>
                                <h5><i class="bi bi-people-fill me-2 text-info"></i> Sosial Media</h5>
                                <div class="d-flex gap-3">
                                    <a href="#" class="text-decoration-none fs-3 text-primary"><i class="bi bi-facebook"></i></a>
                                    <a href="#" class="text-decoration-none fs-3 text-info"><i class="bi bi-twitter"></i></a>
                                    <a href="#" class="text-decoration-none fs-3 text-danger"><i class="bi bi-instagram"></i></a>
                                    <a href="#" class="text-decoration-none fs-3 text-success"><i class="bi bi-whatsapp"></i></a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="row mt-4">
                <div class="col-md-6 animate__animated animate__fadeIn">
                    <div class="card">
                        <div class="card-body text-center">
                            <h5 class="card-title">Hubungi via WhatsApp</h5>
                            <p>Scan QR code berikut untuk langsung terhubung dengan kami di WhatsApp</p>
                            <div class="qr-container mb-3">
                                <img src="https://api.qrserver.com/v1/create-qr-code/?size=150x150&data=https://wa.me/6282164924290" alt="WhatsApp QR Code">
                            </div>
                            <a href="https://wa.me/6282164924290" class="btn btn-success"><i class="bi bi-whatsapp"></i> Hubungi Sekarang</a>
                        </div>
                    </div>
                </div>
                <div class="col-md-6 animate__animated animate__fadeIn">
                    <div class="card">
                        <div class="card-body text-center">
                            <h5 class="card-title">Jam Operasional</h5>
                            <table class="table">
                                <tbody>
                                    <tr>
                                        <td>Senin - Jumat</td>
                                        <td>09:00 - 17:00</td>
                                    </tr>
                                    <tr>
                                        <td>Sabtu</td>
                                        <td>09:00 - 15:00</td>
                                    </tr>
                                    <tr>
                                        <td>Minggu</td>
                                        <td>Tutup</td>
                                    </tr>
                                </tbody>
                            </table>
                            <p class="text-muted">*Kecuali hari libur nasional</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Account Section -->
        <section id="account" class="page-section d-none">
            <!-- Account Section when logged in -->
            <div id="accountSection" class="d-none">
                <h2 class="mb-4 animate__animated animate__fadeIn">Akun Saya</h2>
                
                <div class="row">
                    <div class="col-lg-4 mb-4">
                        <div class="card">
                            <div class="card-body text-center">
                                <img src="https://via.placeholder.com/150" class="rounded-circle mb-3" alt="Profile" width="150" height="150">
                                <h4 id="accountName">John Doe</h4>
                                <p class="text-muted" id="accountEmail">john.doe@example.com</p>
                                <div class="d-grid gap-2">
                                    <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#changePhotoModal">Ganti Foto</button>
                                    <button class="btn btn-outline-danger" onclick="logout()">Logout</button>
                                </div>
                            </div>
                        </div>
                        
                        <div class="card mt-4">
                            <div class="card-body">
                                <h5 class="card-title">Statistik Akun</h5>
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        Pesanan
                                        <span class="badge bg-primary rounded-pill">12</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        Favorit
                                        <span class="badge bg-success rounded-pill">5</span>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        Poin Hadiah
                                        <span class="badge bg-warning rounded-pill">1,250</span>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-lg-8">
                        <div class="card">
                            <div class="card-body">
                                <ul class="nav nav-tabs" id="accountTab" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link active" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile" type="button" role="tab">Profil</button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="settings-tab" data-bs-toggle="tab" data-bs-target="#settings" type="button" role="tab">Pengaturan</button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="security-tab" data-bs-toggle="tab" data-bs-target="#security" type="button" role="tab">Keamanan</button>
                                    </li>
                                </ul>
                                <div class="tab-content p-3" id="accountTabContent">
                                    <div class="tab-pane fade show active" id="profile" role="tabpanel">
                                        <form id="profileForm">
                                            <div class="row mb-3">
                                                <div class="col-md-6">
                                                    <label for="firstName" class="form-label">Nama Depan</label>
                                                    <input type="text" class="form-control" id="firstName" value="John">
                                                </div>
                                                <div class="col-md-6">
                                                    <label for="lastName" class="form-label">Nama Belakang</label>
                                                    <input type="text" class="form-control" id="lastName" value="Doe">
                                                </div>
                                            </div>
                                            <div class="mb-3">
                                                <label for="email" class="form-label">Email</label>
                                                <input type="email" class="form-control" id="email" value="john.doe@example.com" disabled>
                                            </div>
                                            <div class="mb-3">
                                                <label for="phone" class="form-label">Nomor Telepon</label>
                                                <input type="tel" class="form-control" id="phone" value="+6281234567890">
                                            </div>
                                            <div class="mb-3">
                                                <label for="birthDate" class="form-label">Tanggal Lahir</label>
                                                <input type="date" class="form-control" id="birthDate" value="1990-01-01">
                                            </div>
                                            <div class="mb-3">
                                                <label for="address" class="form-label">Alamat</label>
                                                <textarea class="form-control" id="address" rows="3">Jl. Contoh No. 123, Jakarta</textarea>
                                            </div>
                                            <button type="submit" class="btn btn-purple">Simpan Perubahan</button>
                                        </form>
                                    </div>
                                    <div class="tab-pane fade" id="settings" role="tabpanel">
                                        <div class="mb-4">
                                            <h5>Preferensi</h5>
                                            <div class="form-check form-switch mb-3">
                                                <input class="form-check-input" type="checkbox" id="darkModeSwitch" checked>
                                                <label class="form-check-label" for="darkModeSwitch">Mode Gelap</label>
                                            </div>
                                            <div class="form-check form-switch mb-3">
                                                <input class="form-check-input" type="checkbox" id="notificationSwitch" checked>
                                                <label class="form-check-label" for="notificationSwitch">Notifikasi Email</label>
                                            </div>
                                            <div class="form-check form-switch mb-3">
                                                <input class="form-check-input" type="checkbox" id="newsletterSwitch">
                                                <label class="form-check-label" for="newsletterSwitch">Newsletter</label>
                                            </div>
                                        </div>
                                        <div class="mb-4">
                                            <h5>Bahasa</h5>
                                            <select class="form-select">
                                                <option selected>Bahasa Indonesia</option>
                                                <option>English</option>
                                            </select>
                                        </div>
                                        <button class="btn btn-purple">Simpan Pengaturan</button>
                                    </div>
                                    <div class="tab-pane fade" id="security" role="tabpanel">
                                        <div class="mb-4">
                                            <h5>Ganti Password</h5>
                                            <form id="passwordForm">
                                                <div class="mb-3">
                                                    <label for="currentPassword" class="form-label">Password Saat Ini</label>
                                                    <input type="password" class="form-control" id="currentPassword" required>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="newPassword" class="form-label">Password Baru</label>
                                                    <input type="password" class="form-control" id="newPassword" required>
                                                </div>
                                                <div class="mb-3">
                                                    <label for="confirmPassword" class="form-label">Konfirmasi Password Baru</label>
                                                    <input type="password" class="form-control" id="confirmPassword" required>
                                                </div>
                                                <button type="submit" class="btn btn-purple">Ganti Password</button>
                                            </form>
                                        </div>
                                        <div>
                                            <h5>Sesi Aktif</h5>
                                            <div class="list-group">
                                                <div class="list-group-item d-flex justify-content-between align-items-center">
                                                    <div>
                                                        <h6 class="mb-1">Chrome - Windows</h6>
                                                        <small class="text-muted">Jakarta, Indonesia · Sekarang</small>
                                                    </div>
                                                    <button class="btn btn-sm btn-outline-danger">Keluar</button>
                                                </div>
                                                <div class="list-group-item d-flex justify-content-between align-items-center">
                                                    <div>
                                                        <h6 class="mb-1">Safari - iPhone</h6>
                                                        <small class="text-muted">Bandung, Indonesia · 2 hari lalu</small>
                                                    </div>
                                                    <button class="btn btn-sm btn-outline-danger">Keluar</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Auth Section when not logged in -->
            <div id="authSection">
                <div class="row justify-content-center">
                    <div class="col-lg-6">
                        <div class="card">
                            <div class="card-body">
                                <ul class="nav nav-tabs" id="authTab" role="tablist">
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link active" id="login-tab" data-bs-toggle="tab" data-bs-target="#login" type="button" role="tab">Login</button>
                                    </li>
                                    <li class="nav-item" role="presentation">
                                        <button class="nav-link" id="register-tab" data-bs-toggle="tab" data-bs-target="#register" type="button" role="tab">Register</button>
                                    </li>
                                </ul>
                                <div class="tab-content p-3" id="authTabContent">
                                    <div class="tab-pane fade show active" id="login" role="tabpanel">
                                        <form id="loginForm">
                                            <div class="mb-3">
                                                <label for="loginEmail" class="form-label">Email</label>
                                                <input type="email" class="form-control" id="loginEmail" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="loginPassword" class="form-label">Password</label>
                                                <input type="password" class="form-control" id="loginPassword" required>
                                            </div>
                                            <button type="submit" class="btn btn-purple w-100 mb-3">Login</button>
                                            <div class="text-center mb-3">
                                                <p class="mb-0">Atau login dengan</p>
                                            </div>
                                            <button type="button" id="googleLoginBtn" class="btn btn-outline-secondary w-100">
                                                <i class="bi bi-google"></i> Google
                                            </button>
                                            <div class="text-center mt-3">
                                                <p class="mb-0">Belum punya akun? <a href="#" onclick="switchAuthTab('register')">Daftar disini</a></p>
                                            </div>
                                        </form>
                                    </div>
                                    <div class="tab-pane fade" id="register" role="tabpanel">
                                        <form id="registerForm">
                                            <div class="mb-3">
                                                <label for="registerName" class="form-label">Nama Lengkap</label>
                                                <input type="text" class="form-control" id="registerName" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="registerEmail" class="form-label">Email</label>
                                                <input type="email" class="form-control" id="registerEmail" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="registerPassword" class="form-label">Password</label>
                                                <input type="password" class="form-control" id="registerPassword" required>
                                            </div>
                                            <div class="mb-3">
                                                <label for="registerConfirmPassword" class="form-label">Konfirmasi Password</label>
                                                <input type="password" class="form-control" id="registerConfirmPassword" required>
                                            </div>
                                            <button type="submit" class="btn btn-purple w-100 mb-3">Daftar</button>
                                            <div class="text-center">
                                                <p class="mb-0">Sudah punya akun? <a href="#" onclick="switchAuthTab('login')">Login disini</a></p>
                                            </div>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Change Photo Modal -->
            <div class="modal fade" id="changePhotoModal" tabindex="-1" aria-hidden="true">
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h5 class="modal-title">Ganti Foto Profil</h5>
                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                        </div>
                        <div class="modal-body">
                            <form id="photoForm">
                                <div class="mb-3">
                                    <label for="photoUpload" class="form-label">Pilih foto baru</label>
                                    <input class="form-control" type="file" id="photoUpload" accept="image/*">
                                </div>
                                <div class="text-center mb-3">
                                    <img id="photoPreview" src="https://via.placeholder.com/200" class="img-thumbnail" style="max-width: 200px;">
                                </div>
                                <div class="d-flex justify-content-between">
                                    <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Batal</button>
                                    <button type="submit" class="btn btn-purple">Simpan Foto</button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Cart Section -->
        <section id="cart" class="page-section d-none">
            <h2 class="mb-4 animate__animated animate__fadeIn">Keranjang Belanja</h2>
            
            <div class="row">
                <div class="col-lg-8">
                    <div class="card mb-4">
                        <div class="card-body">
                            <h5 class="card-title">Daftar Produk</h5>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Produk</th>
                                            <th>Harga</th>
                                            <th>Jumlah</th>
                                            <th>Subtotal</th>
                                            <th></th>
                                        </tr>
                                    </thead>
                                    <tbody id="cartItems">
                                        <tr>
                                            <td colspan="5" class="text-center py-5">Keranjang belanja kosong</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Ringkasan Belanja</h5>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Subtotal</span>
                                <span id="cartSubtotal">Rp 0</span>
                            </div>
                            <div class="d-flex justify-content-between mb-3">
                                <span>Ongkos Kirim</span>
                                <span>Rp 15.000</span>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between mb-3">
                                <h6>Total</h6>
                                <h6 id="cartTotal">Rp 15.000</h6>
                            </div>
                            <button class="btn btn-purple w-100" onclick="checkout()">Lanjut ke Pembayaran</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

       <!-- Bagian Pesanan -->
<section id="orders" class="page-section d-none">
    <h2 class="mb-4 animate__animated animate__fadeIn">Pesanan Saya</h2>
    
    <div class="card">
        <div class="card-body">
            <h5 class="card-title">Daftar Pesanan</h5>
            <div class="table-responsive">
                <table class="table">
                    <thead>
                        <tr>
                            <th>ID Pesanan</th>
                            <th>Tanggal</th>
                            <th>Produk</th>
                            <th>Total</th>
                            <th>Status</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="ordersList">
                        <tr>
                            <td colspan="6" class="text-center py-5">Belum ada pesanan</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
</section>



        <!-- Checkout Section -->
        <section id="checkout" class="page-section d-none">
            <h2 class="mb-4 animate__animated animate__fadeIn">Checkout</h2>
            
            <div class="row">
                <div class="col-lg-8">
                    <div class="card mb-4">
                        <div class="card-body">
                            <h5 class="card-title">Informasi Pengiriman</h5>
                            <form id="shippingForm">
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="fullName" class="form-label">Nama Lengkap</label>
                                        <input type="text" class="form-control" id="fullName" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label for="email" class="form-label">Email</label>
                                        <input type="email" class="form-control" id="email" required placeholder="Masukkan email untuk konfirmasi pesanan">
                                    </div>
                                </div>
                                <div class="row mb-3">
                                    <div class="col-md-6">
                                        <label for="phoneNumber" class="form-label">Nomor Telepon</label>
                                        <input type="tel" class="form-control" id="phoneNumber" required pattern="[0-9]{10,13}" placeholder="081234567890">
                                    </div>
                                    <div class="col-md-6">
                                        <label for="postalCode" class="form-label">Kode Pos</label>
                                        <input type="text" class="form-control" id="postalCode" required pattern="[0-9]{5}" placeholder="12345">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="address" class="form-label">Alamat Lengkap</label>
                                    <textarea class="form-control" id="address" rows="3" required></textarea>
                                </div>
                                <div class="mb-3">
                                    <label for="province" class="form-label">Provinsi</label>
                                    <select class="form-select" id="province" required>
                                        <option value="">Pilih Provinsi</option>
                                        <option value="DKI Jakarta">DKI Jakarta</option>
                                        <option value="Jawa Barat">Jawa Barat</option>
                                        <option value="Jawa Tengah">Jawa Tengah</option>
                                        <option value="Jawa Timur">Jawa Timur</option>
                                        <option value="Sumatera Utara">Sumatera Utara</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="city" class="form-label">Kota/Kabupaten</label>
                                    <select class="form-select" id="city" required>
                                        <option value="">Pilih Kota/Kabupaten</option>
                                        <option value="Medan">Medan</option>
                                        <option value="Nias">Nias</option>
                                        <option value="Deli Serdang">Deli Serdang</option>
                                        <option value="Binjai">Binjai</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="shippingMethod" class="form-label">Metode Pengiriman</label>
                                    <select class="form-select" id="shippingMethod" required>
                                        <option value="">Pilih Metode Pengiriman</option>
                                        <option value="JNE Reguler">JNE Reguler</option>
                                        <option value="TIKI">TIKI</option>
                                        <option value="POS Indonesia">POS Indonesia</option>
                                        <option value="J&T Express">J&T Express</option>
                                    </select>
                                </div>
                            </form>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Produk yang Dipesan</h5>
                            <div class="table-responsive">
                                <table class="table">
                                    <thead>
                                        <tr>
                                            <th>Produk</th>
                                            <th>Harga</th>
                                            <th>Jumlah</th>
                                            <th>Subtotal</th>
                                        </tr>
                                    </thead>
                                    <tbody id="checkoutProducts">
                                        <tr>
                                            <td colspan="4" class="text-center py-5">Tidak ada produk</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-4">
                    <div class="card mb-4">
                        <div class="card-body">
                            <h5 class="card-title">Ringkasan Pembayaran</h5>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Subtotal</span>
                                <span id="checkoutSubtotal">Rp 0</span>
                            </div>
                            <div class="d-flex justify-content-between mb-2">
                                <span>Ongkos Kirim</span>
                                <span id="checkoutShipping">Rp 0</span>
                            </div>
                            <hr>
                            <div class="d-flex justify-content-between mb-3">
                                <h6>Total</h6>
                                <h6 id="checkoutTotal">Rp 0</h6>
                            </div>
                        </div>
                    </div>
                    
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">Metode Pembayaran</h5>
                            <ul class="nav nav-tabs" id="paymentMethodTab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="bank-tab" data-bs-toggle="tab" data-bs-target="#bank" type="button" role="tab">Transfer Bank</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="ewallet-tab" data-bs-toggle="tab" data-bs-target="#ewallet" type="button" role="tab">Dompet Digital</button>
                                </li>
                            </ul>
                            <div class="tab-content p-3 border border-top-0" id="paymentMethodTabContent">
                                <div class="tab-pane fade show active" id="bank" role="tabpanel">
                                    <div class="mb-3">
                                        <label for="bankSelect" class="form-label">Pilih Bank</label>
                                        <select class="form-select" id="bankSelect">
                                            <option value="">Pilih Bank</option>
                                            <option value="bca">BCA</option>
                                            <option value="bni">BNI</option>
                                            <option value="bri">BRI</option>
                                            <option value="mandiri">Mandiri</option>
                                            <option value="seabank">SeaBank</option>
                                        </select>
                                    </div>
                                    <div class="alert alert-info">
                                        <h6>Rekening Tujuan</h6>
                                        <p id="bankAccountInfo">Pilih bank terlebih dahulu</p>
                                        <p class="mb-0">Harap transfer sesuai nominal pesanan. Pesanan akan diproses setelah pembayaran diterima.</p>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="ewallet" role="tabpanel">
                                    <div class="mb-3">
                                        <label for="ewalletSelect" class="form-label">Pilih Dompet Digital</label>
                                        <select class="form-select" id="ewalletSelect">
                                            <option value="">Pilih Dompet Digital</option>
                                            <option value="dana">DANA</option>
                                            <option value="ovo">OVO</option>
                                            <option value="gopay">GoPay</option>
                                            <option value="shopeepay">ShopeePay</option>
                                            <option value="linkaja">LinkAja</option>
                                        </select>
                                    </div>
                                    <div class="alert alert-info">
                                        <h6>Nomor Tujuan</h6>
                                        <p>082164924290</p>
                                        <p class="mb-0">Harap transfer sesuai nominal pesanan. Pesanan akan diproses setelah pembayaran diterima.</p>
                                    </div>
                                </div>
                            </div>
                            <button onclick="checkPlaceOrder()" class="btn btn-primary btn-lg w-100 mt-3">Buat Pesanan</button>
                        </div>
                    </div>
                </div>
            </div>
        </section>

    <!-- Mobile Bottom Navbar -->
    <nav class="bottom-navbar d-lg-none">
        <ul class="nav justify-content-around w-100">
            <li class="nav-item">
                <a class="nav-link" href="#dashboard">
                    <i class="bi bi-speedometer2"></i>
                    <span>Dashboard</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#about">
                    <i class="bi bi-person"></i>
                    <span>Tentang</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link product-btn" href="#products">
                    <i class="bi bi-bag"></i>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#contact">
                    <i class="bi bi-envelope"></i>
                    <span>Kontak</span>
                </a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="#account">
                    <i class="bi bi-person-circle"></i>
                    <span>Akun</span>
                </a>
            </li>
        </ul>
    </nav>

    <!-- Product Detail Modal -->
    <div class="modal fade" id="productDetailModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="productModalTitle">Detail Produk</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row">
                        <div class="col-md-6">
                            <img src="https://via.placeholder.com/500" class="img-fluid product-detail-img mb-3" id="productModalImage" alt="Product Image">
                        </div>
                        <div class="col-md-6">
                            <h3 id="productModalName">Nama Produk</h3>
                            <div class="star-rating mb-2">
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-fill"></i>
                                <i class="bi bi-star-half"></i>
                                <small class="text-muted ms-1">(128 ulasan)</small>
                            </div>
                            <h4 class="text-primary mb-3" id="productModalPrice">Rp 0</h4>
                            
                            <ul class="nav nav-tabs mb-3" id="productDetailTab" role="tablist">
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link active" id="description-tab" data-bs-toggle="tab" data-bs-target="#description" type="button" role="tab">Deskripsi</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="specs-tab" data-bs-toggle="tab" data-bs-target="#specs" type="button" role="tab">Spesifikasi</button>
                                </li>
                                <li class="nav-item" role="presentation">
                                    <button class="nav-link" id="reviews-tab" data-bs-toggle="tab" data-bs-target="#reviews" type="button" role="tab">Ulasan</button>
                                </li>
                            </ul>
                            
                            <div class="tab-content" id="productDetailTabContent">
                                <div class="tab-pane fade show active" id="description" role="tabpanel">
                                    <p id="productModalDescription">Deskripsi produk akan ditampilkan di sini.</p>
                                </div>
                                <div class="tab-pane fade" id="specs" role="tabpanel">
                                    <ul id="productModalSpecs">
                                        <li>Spesifikasi produk akan ditampilkan di sini</li>
                                    </ul>
                                </div>
                                <div class="tab-pane fade" id="reviews" role="tabpanel">
                                    <div class="review-item">
                                        <div class="d-flex justify-content-between mb-2">
                                            <div>
                                                <span class="review-author">John Doe</span>
                                                <span class="verified-buyer">Pembeli Terverifikasi</span>
                                            </div>
                                            <span class="review-date">12 Januari 2023</span>
                                        </div>
                                        <div class="star-rating mb-2">
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                        </div>
                                        <p>Produk sangat bagus, sesuai dengan deskripsi. Pengiriman cepat dan packing rapi.</p>
                                    </div>
                                    
                                    <div class="review-item">
                                        <div class="d-flex justify-content-between mb-2">
                                            <div>
                                                <span class="review-author">Jane Smith</span>
                                            </div>
                                            <span class="review-date">5 Desember 2022</span>
                                        </div>
                                        <div class="star-rating mb-2">
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star-fill"></i>
                                            <i class="bi bi-star"></i>
                                        </div>
                                        <p>Produknya bagus, tapi pengiriman agak lama. Mungkin karena musim liburan.</p>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="d-flex gap-2 mt-4">
                                <button class="btn btn-outline-secondary flex-grow-1" onclick="addToCartFromModal()">
                                    <i class="bi bi-cart-plus"></i> Tambah ke Keranjang
                                </button>
                                <button class="btn btn-purple flex-grow-1" onclick="buyNow()">
                                    <i class="bi bi-bag"></i> Beli Sekarang
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Order Success Modal -->
    <div class="modal fade" id="orderSuccessModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-body text-center p-5">
                    <div class="display-1 text-success mb-4">
                        <i class="bi bi-check-circle"></i>
                    </div>
                    <h3 class="mb-3">Pesanan Berhasil!</h3>
                    <p class="mb-4">Terima kasih telah berbelanja di toko kami. Pesanan Anda akan segera kami proses.</p>
                    <div class="d-flex justify-content-center gap-3">
                        <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">Tutup</button>
                        <a href="#orders" class="btn btn-purple" data-bs-dismiss="modal">Lihat Pesanan</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

   <!-- Toast Notifications -->
<div class="position-fixed end-0 p-3 toast-container" style="z-index: 11; bottom: 80px;">
    <div id="successToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header bg-success text-white">
            <strong class="me-auto">Sukses</strong>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">
            Operasi berhasil dilakukan.
        </div>
    </div>
    
    <div id="errorToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
        <div class="toast-header bg-danger text-white">
            <strong class="me-auto">Error</strong>
            <button type="button" class="btn-close btn-close-white" data-bs-dismiss="toast" aria-label="Close"></button>
        </div>
        <div class="toast-body">
            Terjadi kesalahan. Silakan coba lagi.
        </div>
    </div>
</div>


    <!-- Modal Konfirmasi Pembayaran -->
<div class="modal fade" id="confirmPaymentModal" tabindex="-1" aria-labelledby="confirmPaymentModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="confirmPaymentModalLabel">Konfirmasi Pembayaran</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                Apakah Anda yakin sudah melakukan pembayaran untuk pesanan #<span id="confirmOrderId"></span>?
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Batal</button>
                <button type="button" class="btn btn-success" id="confirmPaymentButton">Ya, Saya Sudah Bayar</button>
            </div>
        </div>
    </div>
</div>



    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.0/firebase-storage-compat.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <script>
    
      
// Firebase configuration
const firebaseConfig = {
    apiKey: "AIzaSyALQjNGLFeFPWrRA4PKe1Hw-6Qqo5x5NSc",
    authDomain: "xdorrwar.firebaseapp.com",
    projectId: "xdorrwar",
    storageBucket: "xdorrwar.appspot.com",
    messagingSenderId: "980171926257",
    appId: "1:980171926257:web:eac0b192b3b01f57d89750",
    measurementId: "G-4QVK2228T2"
};

// Initialize Firebase
const app = firebase.initializeApp(firebaseConfig);
const auth = firebase.auth();
const db = firebase.firestore();
const storage = firebase.storage();

// Initialize EmailJS with single user ID
emailjs.init('ojYPPxhvmkVjH3ls8'); // Gunakan hanya satu inisialisasi


// Format Currency and Date
function formatCurrency(amount) {
    return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(amount);
}

function formatDate(date) {
    if (!(date instanceof Date)) {
        date = new Date(date);
    }
    return date.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });
}

// Show Toast Notification
function showToast(type, message) {
    const toastElement = type === 'success' ? document.getElementById('successToast') : document.getElementById('errorToast');
    if (!toastElement) return;
    const toastBody = toastElement.querySelector('.toast-body');
    if (toastBody) toastBody.textContent = message;
    const toast = new bootstrap.Toast(toastElement);
    toast.show();
}

// Get Order Status Badge
function getOrderStatusBadge(status) {
    const statusMap = {
        'pending': { class: 'status-pending', text: 'Menunggu Pembayaran' },
        'processing': { class: 'status-processing', text: 'Diproses' },
        'shipped': { class: 'status-shipped', text: 'Dikirim' },
        'delivered': { class: 'status-delivered', text: 'Selesai' },
        'cancelled': { class: 'status-cancelled', text: 'Dibatalkan' }
    };
    return statusMap[status] 
        ? `<span class="status-badge ${statusMap[status].class}">${statusMap[status].text}</span>`
        : `<span class="status-badge status-pending">Status Tidak Dikenal</span>`;
}

// Load Dashboard Data
async function loadDashboardData() {
    try {
        // Fetch Orders
        const ordersSnapshot = await db.collection('orders').orderBy('createdAt', 'desc').get();
        const orders = [];
        ordersSnapshot.forEach(doc => {
            const data = doc.data();
            data.id = doc.id;
            data.date = data.createdAt?.toDate() || new Date();
            orders.push(data);
        });

        // Calculate Metrics
        const totalRevenue = orders.reduce((sum, order) => order.status === 'delivered' ? sum + order.total : sum, 0);
        const orderCount = orders.length;
        const customerEmails = new Set(orders.map(order => order.shippingInfo?.email).filter(email => email));
        const customerCount = customerEmails.size;

        // Fetch Reviews for Satisfaction Rating
        const productsSnapshot = await db.collection('products').get();
        let totalRating = 0, reviewCount = 0;
        productsSnapshot.forEach(doc => {
            const product = doc.data();
            if (product.reviewsList) {
                product.reviewsList.forEach(review => {
                    totalRating += review.rating;
                    reviewCount++;
                });
            }
        });
        const satisfactionRating = reviewCount > 0 ? (totalRating / reviewCount).toFixed(1) : 0;

        // Update Key Metrics
        document.getElementById('totalRevenue').textContent = formatCurrency(totalRevenue);
        document.getElementById('revenueDescription').textContent = `Pendapatan dari ${orders.filter(o => o.status === 'delivered').length} pesanan selesai.`;
        document.getElementById('orderCount').textContent = orderCount;
        document.getElementById('orderDescription').textContent = `Termasuk ${orders.filter(o => o.status === 'pending').length} pesanan baru hari ini.`;
        document.getElementById('customerCount').textContent = customerCount;
        document.getElementById('customerDescription').textContent = `Jumlah pelanggan unik yang telah berbelanja di toko Anda.`;
        document.getElementById('satisfactionRating').textContent = satisfactionRating;
        document.getElementById('satisfactionDescription').textContent = `Berdasarkan ${reviewCount} ulasan pelanggan untuk semua produk.`;

        // Load Recent Orders
        const recentOrdersTable = document.getElementById('recentOrdersTable');
        let filteredOrders = orders.slice(0, 4);
        const statusFilter = document.getElementById('orderStatusFilter');
        statusFilter.addEventListener('change', () => {
            const selectedStatus = statusFilter.value;
            filteredOrders = selectedStatus ? orders.filter(o => o.status === selectedStatus).slice(0, 4) : orders.slice(0, 4);
            updateRecentOrders(filteredOrders);
        });
        updateRecentOrders(filteredOrders);

        // Load Top Products
        const productSales = {};
        orders.forEach(order => {
            order.items.forEach(item => {
                productSales[item.id] = (productSales[item.id] || 0) + item.quantity;
            });
        });
        const topProducts = Object.entries(productSales)
            .map(([id, quantity]) => ({ id: parseInt(id), quantity }))
            .sort((a, b) => b.quantity - a.quantity)
            .slice(0, 4);
        const topProductsList = document.getElementById('topProductsList');
        topProductsList.innerHTML = '';
        for (const product of topProducts) {
            const productData = await db.collection('products').doc(product.id.toString()).get();
            const name = productData.exists ? productData.data().name : 'Produk Tidak Diketahui';
            topProductsList.innerHTML += `
                <li class="list-group-item d-flex justify-content-between align-items-center animate__animated slide-up">
                    ${name}
                    <span class="badge rounded-pill" style="background-color: var(--primary-color); color: white;">${product.quantity} terjual</span>
                </li>
            `;
        }

        // Load Customer Feedback
        const feedbackContainer = document.getElementById('customerFeedback');
        feedbackContainer.innerHTML = '';
        const reviews = [];
        productsSnapshot.forEach(doc => {
            const product = doc.data();
            if (product.reviewsList) {
                product.reviewsList.forEach(review => {
                    reviews.push({ ...review, productName: product.name });
                });
            }
        });
        reviews.sort(() => Math.random() - 0.5).slice(0, 3).forEach((review, index) => {
            feedbackContainer.innerHTML += `
                <div class="col-12 col-md-4 animate__animated zoom-in animate__delay-${index}s">
                    <div class="card shadow-sm h-100 premium-card">
                        <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                                <img src="https://via.placeholder.com/40" class="rounded-circle me-2" alt="Pelanggan">
                                <div>
                                    <h6 class="mb-0">${review.author}</h6>
                                    <div class="star-rating animate__animated pulse animate__infinite">
                                        ${'★'.repeat(review.rating)}${'☆'.repeat(5 - review.rating)}
                                    </div>
                                </div>
                            </div>
                            <p class="card-text small">"${review.comment}"</p>
                            <small class="text-muted">Untuk: ${review.productName}</small>
                        </div>
                    </div>
                </div>
            `;
        });

        // Load Sales Chart
        const salesPeriodFilter = document.getElementById('salesPeriodFilter');
        let periodDays = parseInt(salesPeriodFilter.value);
        salesPeriodFilter.addEventListener('change', () => {
            periodDays = parseInt(salesPeriodFilter.value);
            updateSalesChart(orders, periodDays);
        });
        updateSalesChart(orders, periodDays);

        // Real-time Order Listener
        db.collection('orders').onSnapshot(snapshot => {
            snapshot.docChanges().forEach(change => {
                if (change.type === 'added') {
                    const notification = document.getElementById('newOrderNotification');
                    notification.classList.remove('d-none');
                    setTimeout(() => notification.querySelector('.btn-close').click(), 5000);
                    loadDashboardData(); // Refresh dashboard
                }
            });
        });
    } catch (error) {
        console.error('Gagal memuat data dashboard:', error);
        showToast('error', 'Gagal memuat data dashboard: ' + error.message);
    }
}

// Update Recent Orders Table
function updateRecentOrders(orders) {
    const recentOrdersTable = document.getElementById('recentOrdersTable');
    recentOrdersTable.innerHTML = '';
    orders.forEach((order, index) => {
        const firstItem = order.items[0];
        recentOrdersTable.innerHTML += `
            <tr class="animate__animated slide-up animate__delay-${index}s">
                <td>#${order.id}</td>
                <td>${order.shippingInfo?.name || 'Pelanggan'}</td>
                <td>${firstItem.name} ${order.items.length > 1 ? `+ ${order.items.length - 1} lainnya` : ''}</td>
                <td>${formatCurrency(order.total)}</td>
                <td>${getOrderStatusBadge(order.status)}</td>
                <td>${formatDate(order.date)}</td>
            </tr>
        `;
    });
}

// Update Sales Chart
function updateSalesChart(orders, days) {
    const ctx = document.getElementById('salesChart').getContext('2d');
    const endDate = new Date();
    const startDate = new Date();
    startDate.setDate(endDate.getDate() - days);

    const labels = [];
    const data = [];
    for (let i = 0; i < days; i++) {
        const date = new Date(startDate);
        date.setDate(startDate.getDate() + i);
        labels.push(date.toLocaleDateString('id-ID', { weekday: 'short' }));
        const dailySales = orders
            .filter(order => order.status === 'delivered' && new Date(order.date).toDateString() === date.toDateString())
            .reduce((sum, order) => sum + order.total, 0);
        data.push(dailySales);
    }

    if (window.salesChart) window.salesChart.destroy();
    window.salesChart = new Chart(ctx, {
        type: 'line',
        data: {
            labels: labels,
            datasets: [{
                label: 'Penjualan (Rp)',
                data: data,
                borderColor: 'var(--primary-color)',
                backgroundColor: 'rgba(156, 39, 176, 0.1)',
                fill: true,
                tension: 0.4
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: false,
            scales: {
                y: {
                    beginAtZero: true,
                    title: {
                        display: true,
                        text: 'Jumlah Penjualan (Rp)',
                        color: 'var(--dark-color)',
                        font: { size: window.innerWidth < 768 ? 12 : 14 }
                    },
                    ticks: {
                        color: 'var(--dark-color)',
                        font: { size: window.innerWidth < 768 ? 10 : 12 },
                        callback: value => formatCurrency(value).replace('Rp', '')
                    }
                },
                x: {
                    title: {
                        display: true,
                        text: 'Hari',
                        color: 'var(--dark-color)',
                        font: { size: window.innerWidth < 768 ? 12 : 14 }
                    },
                    ticks: {
                        color: 'var(--dark-color)',
                        font: { size: window.innerWidth < 768 ? 10 : 12 }
                    }
                }
            },
            plugins: {
                legend: {
                    labels: {
                        color: 'var(--dark-color)',
                        font: { size: window.innerWidth < 768 ? 12 : 14 }
                    }
                },
                tooltip: {
                    enabled: true,
                    mode: 'index',
                    intersect: false,
                    titleFont: { size: window.innerWidth < 768 ? 12 : 14 },
                    bodyFont: { size: window.innerWidth < 768 ? 10 : 12 },
                    callbacks: {
                        label: context => `Penjualan: ${formatCurrency(context.parsed.y)}`
                    }
                }
            },
            interaction: {
                mode: 'nearest',
                axis: 'x',
                intersect: false
            },
            animation: {
                duration: 2000,
                easing: 'easeOutBounce'
            }
        }
    });
}

// Initialize Dashboard
document.addEventListener('DOMContentLoaded', () => {
    auth.onAuthStateChanged(user => {
        if (user) {
            loadDashboardData();
        } else {
            showToast('error', 'Silakan login untuk mengakses dashboard.');
            showSection('account');
        }
    });
});


// Fungsi untuk menyimpan pesanan ke Firebase (TAMBAHAN BARU)
function saveOrderToFirebase(order) {
    const user = auth.currentUser;
    const orderRef = db.collection('orders').doc(order.id);

    const orderData = {
        ...order,
        userId: user ? user.uid : null,
        userEmail: user && user.email ? user.email : order.shippingInfo.email || null,
        status: 'pending',
        createdAt: firebase.firestore.FieldValue.serverTimestamp(),
        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
    };

    orderData.date = firebase.firestore.Timestamp.fromDate(new Date(order.date));

    console.log('Menyimpan pesanan ke Firebase:', orderData);

    return orderRef.set(orderData).then(() => {
        console.log('Pesanan berhasil disimpan ke Firebase:', order.id);
        return Promise.resolve();
    }).catch(error => {
        console.error('Gagal menyimpan pesanan ke Firebase:', error);
        throw error;
    });
}

// Product data
const products = {
    1: {
        id: 1,
        name: "Smartphone X1",
        price: 5999000,
        image: "https://i.pinimg.com/474x/0a/f9/3c/0af93cb70a6806791f20f608274bbeac.jpg",
        description: "Smartphone flagship dengan kamera 108MP, chipset terbaru, dan baterai 5000mAh yang tahan lama. Layar AMOLED 6.7 inci dengan refresh rate 120Hz.",
        specs: [
            "Layar: 6.7 inci AMOLED 120Hz",
            "Prosesor: Snapdragon 8 Gen 2",
            "RAM: 12GB",
            "Penyimpanan: 256GB",
            "Kamera: 108MP + 12MP + 8MP",
            "Baterai: 5000mAh"
        ],
        rating: 4.5,
        reviews: 128,
        reviewsList: [
            {
                author: "John Doe",
                verified: true,
                date: "12 Januari 2023",
                rating: 5,
                comment: "Produk sangat bagus, sesuai dengan deskripsi. Pengiriman cepat dan packing rapi."
            },
            {
                author: "Jane Smith",
                verified: false,
                date: "5 Desember 2022",
                rating: 4,
                comment: "Produknya bagus, tapi pengiriman agak lama. Mungkin karena musim liburan."
            }
        ]
    },
    2: {
        id: 2,
        name: "Laptop Pro",
        price: 12499000,
        image: "https://via.placeholder.com/500",
        description: "Laptop profesional dengan prosesor Intel Core i7 generasi terbaru, GPU NVIDIA RTX 3050, RAM 16GB DDR5, dan SSD 512GB. Layar 15.6\" IPS 144Hz.",
        specs: [
            "Prosesor: Intel Core i7-12700H",
            "GPU: NVIDIA RTX 3050 4GB",
            "RAM: 16GB DDR5",
            "Penyimpanan: 512GB NVMe SSD",
            "Layar: 15.6\" IPS 144Hz",
            "Sistem Operasi: Windows 11 Pro"
        ],
        rating: 4,
        reviews: 87,
        reviewsList: [
            {
                author: "Michael Johnson",
                verified: true,
                date: "20 Februari 2023",
                rating: 5,
                comment: "Performanya sangat cepat, cocok untuk kerja dan gaming. Layarnya juga bagus."
            },
            {
                author: "Sarah Williams",
                verified: true,
                date: "3 Januari 2023",
                rating: 4,
                comment: "Laptopnya keren, tapi agak berat untuk dibawa-bawa."
            }
        ]
    },
    3: {
        id: 3,
        name: "Kaos Premium",
        price: 199000,
        image: "https://via.placeholder.com/500",
        description: "Kaos katun premium dengan desain eksklusif dan nyaman dipakai. Bahan katun combed 30s yang lembut dan menyerap keringat.",
        specs: [
            "Bahan: Katun Combed 30s",
            "Ukuran: S, M, L, XL",
            "Warna: Hitam, Putih, Navy",
            "Berat: 180 gram",
            "Made in Indonesia"
        ],
        rating: 5,
        reviews: 256,
        reviewsList: [
            {
                author: "David Brown",
                verified: true,
                date: "15 Maret 2023",
                rating: 5,
                comment: "Bahan sangat nyaman dipakai, tidak panas dan tidak mudah melar."
            },
            {
                author: "Lisa Taylor",
                verified: false,
                date: "28 Februari 2023",
                rating: 5,
                comment: "Desainnya simple tapi elegan, harga juga worth it untuk kualitasnya."
            }
        ]
    },
    4: {
        id: 4,
        name: "Kopi Specialty",
        price: 125000,
        image: "https://via.placeholder.com/500",
        description: "Kopi arabika specialty dari perkebunan di Toraja, Sulawesi. Dengan rasa yang kompleks dan aroma yang khas, cocok untuk pecinta kopi sejati.",
        specs: [
            "Asal: Toraja, Sulawesi",
            "Varietas: Arabika",
            "Proses: Full Wash",
            "Roast Level: Medium",
            "Berat: 250 gram",
            "Kemasan: Vacuum Sealed"
        ],
        rating: 4.5,
        reviews: 342,
        reviewsList: [
            {
                author: "Robert Wilson",
                verified: true,
                date: "10 Maret 2023",
                rating: 5,
                comment: "Aromanya harum sekali, rasa juga tidak terlalu pahit. Sudah beli berkali-kali."
            },
            {
                author: "Emily Anderson",
                verified: false,
                date: "22 Januari 2023",
                rating: 4,
                comment: "Kopinya enak, tapi harganya agak mahal dibandingkan merk lain."
            }
        ]
    },
    5: {
        id: 5,
        name: "Smart Watch",
        price: 1799000,
        image: "https://via.placeholder.com/500",
        description: "Smartwatch dengan fitur kesehatan dan notifikasi smartphone. Dilengkapi dengan monitor detak jantung, SPO2, dan berbagai mode olahraga.",
        specs: [
            "Layar: AMOLED 1.4 inci",
            "Baterai: 300mAh (7 hari)",
            "Konektivitas: Bluetooth 5.0",
            "Sensor: Detak Jantung, SPO2, Akselerometer",
            "Tahan Air: IP68",
            "Kompatibilitas: Android & iOS"
        ],
        rating: 3.5,
        reviews: 54,
        reviewsList: [
            {
                author: "James Martinez",
                verified: true,
                date: "5 Maret 2023",
                rating: 4,
                comment: "Fitur lengkap untuk harganya, baterai tahan lama seperti di deskripsi."
            },
            {
                author: "Jennifer Garcia",
                verified: false,
                date: "18 Februari 2023",
                rating: 3,
                comment: "Kadang notifikasi dari HP tidak masuk, harus restart dulu."
            }
        ]
    },
    6: {
        id: 6,
        name: "Kue Kering",
        price: 75000,
        image: "https://via.placeholder.com/500",
        description: "Kue kering homemade dengan bahan premium tanpa pengawet. Tersedia dalam berbagai varian rasa seperti coklat, keju, dan kacang.",
        specs: [
            "Varian Rasa: Coklat, Keju, Kacang",
            "Berat: 500 gram",
            "Kemasan: Toples Plastik",
            "Kadaluarsa: 2 minggu",
            "Tanpa Pengawet",
            "Homemade"
        ],
        rating: 5,
        reviews: 412,
        reviewsList: [
            {
                author: "Daniel Rodriguez",
                verified: true,
                date: "8 Maret 2023",
                rating: 5,
                comment: "Rasanya enak banget, tidak terlalu manis dan teksturnya pas."
            },
            {
                author: "Michelle Lee",
                verified: true,
                date: "25 Februari 2023",
                rating: 5,
                comment: "Anak-anak suka sekali, pesan lagi untuk acara arisan."
            }
        ]
    }
};

// Cart and orders data
let cart = JSON.parse(localStorage.getItem('cart')) || [];
let orders = JSON.parse(localStorage.getItem('orders')) || [];

// DOM elements
const cartCount = document.getElementById('cartCount');
const ordersCount = document.getElementById('ordersCount');
const cartIcon = document.getElementById('cartIcon');
const ordersIcon = document.getElementById('ordersIcon');
const cartDropdown = document.getElementById('cartDropdown');
const ordersDropdown = document.getElementById('ordersDropdown');
const cartDropdownContent = document.getElementById('cartDropdownContent');
const ordersDropdownContent = document.getElementById('ordersDropdownContent');

// Fungsi untuk mengirim email konfirmasi pesanan
function sendOrderConfirmation(orderId, userEmail, userName, orderDetails) {
    // Validasi email penerima
    if (!userEmail || !userEmail.trim() || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(userEmail)) {
        console.error('Email penerima tidak valid atau kosong:', userEmail);
        return Promise.reject(new Error('Email penerima tidak valid atau kosong'));
    }

    console.log('Mengirim email konfirmasi untuk:', {
        orderId,
        userEmail,
        userName,
        serviceId: 'service_tsgp232',
        templateId: 'template_a057amj'
    });

    // Parameter untuk EmailJS
    const emailParams = {
        order_id: orderId,
        user_name: userName || 'Pelanggan',
        user_email: userEmail, // Untuk template yang menggunakan {{user_email}}
        to_email: userEmail,   // Cadangan untuk template yang menggunakan {{to_email}}
        order_date: formatDate(new Date()),
        order_total: formatCurrency(orderDetails.total),
        order_items: orderDetails.items
            .map(item => `${item.name} (${item.quantity}x) - ${formatCurrency(item.price * item.quantity)}`)
            .join('<br>'),
        shipping_address: `
            ${orderDetails.shippingInfo.name}<br>
            ${orderDetails.shippingInfo.email}<br>
            ${orderDetails.shippingInfo.address}<br>
            ${orderDetails.shippingInfo.city}, ${orderDetails.shippingInfo.province}<br>
            ${orderDetails.shippingInfo.postalCode}<br>
            Telp: ${orderDetails.shippingInfo.phone}
        `,
        payment_method: orderDetails.paymentInfo.method
    };

    console.log('Parameter EmailJS yang dikirim:', emailParams);

    return emailjs
        .send('service_tsgp232', 'template_a057amj', emailParams)
        .then(() => {
            console.log('Email konfirmasi berhasil dikirim ke:', userEmail);
            return Promise.resolve();
        })
        .catch(error => {
            console.error('Gagal mengirim email konfirmasi:', error);
            throw new Error(`Gagal mengirim email: ${error.text || error.message}`);
        });
}

// Fungsi untuk mengupdate status pesanan
function updateOrderStatus(orderId, newStatus) {
    console.log('Mengupdate status pesanan:', { orderId, newStatus });
    return db.collection('orders').doc(orderId).update({
        status: newStatus,
        updatedAt: firebase.firestore.FieldValue.serverTimestamp()
    }).then(() => {
        console.log('Status pesanan berhasil diupdate:', orderId);
        return Promise.resolve();
    }).catch(error => {
        console.error('Gagal mengupdate status pesanan:', error);
        throw error;
    });
}

// Fungsi untuk mendapatkan daftar pesanan user
function getUserOrders(userId) {
    console.log('Mengambil pesanan untuk user:', userId);
    return db.collection('orders')
        .where('userId', '==', userId)
        .orderBy('createdAt', 'desc')
        .get()
        .then(snapshot => {
            const orders = [];
            snapshot.forEach(doc => {
                const data = doc.data();
                // Konversi Timestamp Firebase ke Date
                data.date = data.date.toDate();
                data.id = doc.id; // Pastikan ID pesanan disertakan
                // Validasi data pesanan
                if (!data.status || !data.items || !data.total) {
                    console.warn('Pesanan tidak valid dari Firebase:', data);
                    return;
                }
                orders.push(data);
            });
            console.log('Pesanan ditemukan:', orders.length);
            return orders;
        }).catch(error => {
            console.error('Gagal mengambil pesanan:', error);
            throw error;
        });
}

function showSection(sectionId) {
    const pageSections = document.querySelectorAll('.page-section');
    const navLinks = document.querySelectorAll('.nav-link:not([data-bs-toggle])');
    
    pageSections.forEach(section => {
        section.classList.add('d-none');
        if (section.id === sectionId) {
            section.classList.remove('d-none');
            
            const elements = section.querySelectorAll('.animate__animated');
            elements.forEach((el, index) => {
                setTimeout(() => {
                    el.classList.add(el.classList[1]);
                }, index * 100);
            });
            
            if (sectionId === 'cart') {
                loadCartPage();
            } else if (sectionId === 'orders') {
                loadOrdersPage();
            } else if (sectionId === 'checkout') {
                loadCheckoutPage();
            } else if (sectionId === 'products') {
                loadProductsPage();
            }
        }
    });
    
    navLinks.forEach(link => {
        link.classList.remove('active');
        if (link.getAttribute('href') === `#${sectionId}`) {
            link.classList.add('active');
        }
    });
    
    window.scrollTo(0, 0);
}

// Initialize when DOM is loaded
document.addEventListener('DOMContentLoaded', function() {
    updateCartCount();
    updateOrdersCount();
    loadCartDropdown();
    loadOrdersDropdown();
    
    if (cartIcon) {
        cartIcon.addEventListener('click', function(e) {
            e.preventDefault();
            showSection('cart');
        });
    }
    
    if (ordersIcon) {
        ordersIcon.addEventListener('click', function(e) {
            e.preventDefault();
            showSection('orders');
        });
    }
    
    const cartDropdownFooter = document.querySelector('.cart-dropdown-footer a');
    if (cartDropdownFooter) {
        cartDropdownFooter.addEventListener('click', function(e) {
            e.preventDefault();
            showSection('cart');
        });
    }

    const ordersDropdownFooter = document.querySelector('.orders-dropdown-footer a');
    if (ordersDropdownFooter) {
        ordersDropdownFooter.addEventListener('click', function(e) {
            e.preventDefault();
            showSection('orders');
        });
    }
    
    document.addEventListener('click', function() {
        if (cartDropdown) cartDropdown.classList.remove('show');
        if (ordersDropdown) ordersDropdown.classList.remove('show');
    });
    
    const navLinks = document.querySelectorAll('.nav-link:not([data-bs-toggle])');
    
    navLinks.forEach(link => {
        link.addEventListener('click', function(e) {
            e.preventDefault();
            const sectionId = this.getAttribute('href').substring(1);
            showSection(sectionId);
        });
    });
    
    const hash = window.location.hash.substring(1);
    if (hash && ['dashboard', 'about', 'products', 'contact', 'account', 'cart', 'orders', 'checkout'].includes(hash)) {
        showSection(hash);
    } else {
        showSection('dashboard');
    }
    
    const darkModeToggle = document.getElementById('darkModeToggle');
    const darkModeSwitch = document.getElementById('darkModeSwitch');
    
    if (darkModeToggle) {
        darkModeToggle.addEventListener('change', function() {
            document.body.setAttribute('data-bs-theme', this.checked ? 'dark' : 'light');
            if (darkModeSwitch) darkModeSwitch.checked = this.checked;
            localStorage.setItem('darkMode', this.checked ? 'enabled' : 'disabled');
        });
    }
    
    if (darkModeSwitch) {
        darkModeSwitch.addEventListener('change', function() {
            document.body.setAttribute('data-bs-theme', this.checked ? 'dark' : 'light');
            if (darkModeToggle) darkModeToggle.checked = this.checked;
            localStorage.setItem('darkMode', this.checked ? 'enabled' : 'disabled');
        });
    }
    
    if (localStorage.getItem('darkMode') === 'enabled') {
        document.body.setAttribute('data-bs-theme', 'dark');
        if (darkModeToggle) darkModeToggle.checked = true;
        if (darkModeSwitch) darkModeSwitch.checked = true;
    }

    auth.onAuthStateChanged((user) => {
        updateAuthUI();
        if (user) {
            // Refresh orders saat user login
            getUserOrders(user.uid).then(firebaseOrders => {
                orders = [...firebaseOrders, ...orders.filter(o => !firebaseOrders.some(fo => fo.id === o.id))];
                localStorage.setItem('orders', JSON.stringify(orders));
                updateOrdersCount();
                loadOrdersDropdown();
                if (window.location.hash === '#orders') {
                    loadOrdersPage();
                }
            }).catch(error => {
                console.error('Gagal memuat pesanan saat login:', error);
            });
        }
    });
    
    const loginForm = document.getElementById('loginForm');
    if (loginForm) {
        loginForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;
            
            loginWithEmail(email, password)
                .then(() => {
                    showToast('success', 'Login berhasil!');
                    updateAuthUI();
                })
                .catch((error) => {
                    showToast('error', getAuthErrorMessage(error));
                });
        });
    }
    
    const registerForm = document.getElementById('registerForm');
    if (registerForm) {
        registerForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const name = document.getElementById('registerName').value;
            const email = document.getElementById('registerEmail').value;
            const password = document.getElementById('registerPassword').value;
            const confirmPassword = document.getElementById('registerConfirmPassword').value;
            
            if (password !== confirmPassword) {
                showToast('error', 'Password tidak cocok!');
                return;
            }
            
            registerWithEmail(name, email, password)
                .then(() => {
                    showToast('success', 'Registrasi berhasil!');
                    switchAuthTab('login');
                })
                .catch((error) => {
                    showToast('error', getAuthErrorMessage(error));
                });
        });
    }
    
    const googleLoginBtn = document.getElementById('googleLoginBtn');
    if (googleLoginBtn) {
        googleLoginBtn.addEventListener('click', function() {
            loginWithGoogle()
                .then(() => {
                    showToast('success', 'Login dengan Google berhasil!');
                    updateAuthUI();
                })
                .catch((error) => {
                    showToast('error', getAuthErrorMessage(error));
                });
        });
    }
    
    const profileForm = document.getElementById('profileForm');
    if (profileForm) {
        profileForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const user = auth.currentUser;
            if (!user) return;
            
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const phone = document.getElementById('phone').value;
            const birthDate = document.getElementById('birthDate').value;
            const address = document.getElementById('address').value;
            
            const displayName = `${firstName} ${lastName}`.trim();
            
            user.updateProfile({
                displayName: displayName
            })
            .then(() => {
                return saveUserAdditionalData(user.uid, {
                    phone: phone,
                    birthDate: birthDate,
                    address: address,
                    lastUpdated: firebase.firestore.FieldValue.serverTimestamp()
                });
            })
            .then(() => {
                showToast('success', 'Profil berhasil diperbarui');
                updateAuthUI();
            })
            .catch((error) => {
                showToast('error', 'Gagal memperbarui profil: ' + error.message);
            });
        });
    }
    
    const photoForm = document.getElementById('photoForm');
    if (photoForm) {
        photoForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const file = document.getElementById('photoUpload').files[0];
            const user = auth.currentUser;
            
            if (!file || !user) return;
            
            const storageRef = storage.ref(`profile_photos/${user.uid}`);
            const uploadTask = storageRef.put(file);
            
            uploadTask.on('state_changed',
                (snapshot) => {
                    const progress = (snapshot.bytesTransferred / snapshot.totalBytes) * 100;
                    console.log('Upload progress: ' + progress + '%');
                },
                (error) => {
                    showToast('error', 'Gagal mengupload foto: ' + error.message);
                },
                () => {
                    uploadTask.snapshot.ref.getDownloadURL().then((downloadURL) => {
                        return user.updateProfile({
                            photoURL: downloadURL
                        });
                    })
                    .then(() => {
                        showToast('success', 'Foto profil berhasil diubah');
                        updateAuthUI();
                        const modal = bootstrap.Modal.getInstance(document.getElementById('changePhotoModal'));
                        if (modal) modal.hide();
                    })
                    .catch((error) => {
                        showToast('error', 'Gagal mengupdate foto profil: ' + error.message);
                    });
                }
            );
        });
    }
    
    const photoUpload = document.getElementById('photoUpload');
    if (photoUpload) {
        photoUpload.addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const photoPreview = document.getElementById('photoPreview');
                    if (photoPreview) photoPreview.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }
        });
    }

    // Tambahkan event listener untuk formulir kontak
    const contactForm = document.getElementById('contactForm');
    if (contactForm) {
        contactForm.addEventListener('submit', function(e) {
            e.preventDefault();
            console.log('Form kontak disubmit');
    
            const name = document.getElementById('contactName').value;
            const email = document.getElementById('contactEmail').value;
            const message = document.getElementById('contactMessage').value;
    
            // Validasi input
            if (!name || !email || !message) {
                console.log('Validasi gagal: Kolom kosong');
                showToast('error', 'Semua kolom harus diisi!');
                return;
            }
    
            if (!document.getElementById('contactEmail').checkValidity()) {
                console.log('Validasi gagal: Email tidak valid');
                showToast('error', 'Email tidak valid!');
                return;
            }
    
            // Kirim pesan
            console.log('Mengirim pesan kontak:', { name, email, message });
            sendContactMessage(name, email, message)
                .then(() => {
                    console.log('Pesan kontak berhasil dikirim');
                    showToast('success', 'Pesan berhasil dikirim!');
                    contactForm.reset();
                })
                .catch((error) => {
                    console.error('Gagal mengirim pesan kontak:', error);
                    showToast('error', `Gagal mengirim pesan: ${error.message}`);
                });
        });
    }
});

// Cart functions
function addToCart(productId) {
    const product = products[productId];
    const existingItem = cart.find(item => item.id === productId);
    
    if (existingItem) {
        existingItem.quantity += 1;
    } else {
        cart.push({
            id: product.id,
            name: product.name,
            price: product.price,
            image: product.image,
            quantity: 1
        });
    }
    
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartCount();
    loadCartDropdown();
    showToast('success', `${product.name} ditambahkan ke keranjang`);
}

function removeFromCart(productId) {
    cart = cart.filter(item => item.id !== productId);
    localStorage.setItem('cart', JSON.stringify(cart));
    updateCartCount();
    loadCartDropdown();
    loadCartPage();
    showToast('success', 'Produk dihapus dari keranjang');
}

function updateQuantity(productId, newQuantity) {
    const item = cart.find(item => item.id === productId);
    if (item && newQuantity > 0) {
        item.quantity = parseInt(newQuantity);
        localStorage.setItem('cart', JSON.stringify(cart));
        loadCartDropdown();
        loadCartPage();
        updateCartCount();
    }
}

function updateCartCount() {
    if (!cartCount) return;
    const count = cart.reduce((total, item) => total + item.quantity, 0);
    cartCount.textContent = count;
}

function loadCartDropdown() {
    if (!cartDropdownContent) return;
    
    if (cart.length === 0) {
        cartDropdownContent.innerHTML = '<p class="text-center">Keranjang belanja kosong</p>';
        return;
    }
    
    let html = '';
    cart.forEach(item => {
        html += `
            <div class="cart-item">
                <img src="${item.image}" alt="${item.name}">
                <div class="cart-item-info">
                    <div class="cart-item-title">${item.name}</div>
                    <div class="cart-item-price">${formatCurrency(item.price)} x ${item.quantity}</div>
                </div>
            </div>
        `;
    });
    
    cartDropdownContent.innerHTML = html;
}

function loadCartPage() {
    const cartItemsElement = document.getElementById('cartItems');
    const cartSubtotalElement = document.getElementById('cartSubtotal');
    const cartTotalElement = document.getElementById('cartTotal');
    
    if (!cartItemsElement || !cartSubtotalElement || !cartTotalElement) return;
    
    if (cart.length === 0) {
        cartItemsElement.innerHTML = `
            <tr>
                <td colspan="5" class="text-center py-5">Keranjang belanja kosong</td>
            </tr>
        `;
        cartSubtotalElement.textContent = formatCurrency(0);
        cartTotalElement.textContent = formatCurrency(15000);
        return;
    }
    
    let subtotal = 0;
    let html = '';
    
    cart.forEach(item => {
        subtotal += item.price * item.quantity;
        html += `
            <tr>
                <td>
                    <div class="d-flex align-items-center">
                        <img src="${item.image}" alt="${item.name}" width="60" class="rounded me-3">
                        <div>
                            <h6 class="mb-0">${item.name}</h6>
                            <small class="text-muted">${formatCurrency(item.price)}</small>
                        </div>
                    </div>
                </td>
                <td>${formatCurrency(item.price)}</td>
                <td>
                    <input type="number" class="form-control form-control-sm" value="${item.quantity}" min="1" style="width: 60px;" onchange="updateQuantity(${item.id}, this.value)">
                </td>
                <td>${formatCurrency(item.price * item.quantity)}</td>
                <td class="text-end">
                    <button class="btn btn-sm btn-outline-danger" onclick="removeFromCart(${item.id})">
                        <i class="bi bi-trash"></i>
                    </button>
                </td>
            </tr>
        `;
    });
    
    const shipping = 15000;
    const total = subtotal + shipping;
    
    cartItemsElement.innerHTML = html;
    cartSubtotalElement.textContent = formatCurrency(subtotal);
    cartTotalElement.textContent = formatCurrency(total);
}

// Orders functions
function updateOrdersCount() {
    if (!ordersCount) return;
    ordersCount.textContent = orders.length;
}

function loadOrdersDropdown() {
    if (!ordersDropdownContent) return;
    
    if (orders.length === 0) {
        ordersDropdownContent.innerHTML = '<p class="text-center">Belum ada pesanan</p>';
        return;
    }
    
    const recentOrders = orders.slice(0, 3);
    let html = '';
    
    recentOrders.forEach(order => {
        html += `
            <div class="order-item">
                <img src="${order.items[0].image}" alt="${order.items[0].name}">
                <div class="order-item-info">
                    <div class="order-item-title">${order.items[0].name}${order.items.length > 1 ? ` + ${order.items.length - 1} lainnya` : ''}</div>
                    <div class="order-item-status">${getOrderStatusBadge(order.status)}</div>
                </div>
            </div>
        `;
    });
    
    ordersDropdownContent.innerHTML = html;
}

/* Fungsi untuk memuat halaman pesanan */
function loadOrdersPage() {
    const ordersList = document.getElementById('ordersList');
    if (!ordersList) {
        console.error('Element ordersList tidak ditemukan');
        return;
    }
    
    // Jika user login, sinkronkan dengan Firebase
    const user = auth.currentUser;
    const loadFromFirebase = user ? getUserOrders(user.uid) : Promise.resolve([]);
    
    loadFromFirebase
        .then(firebaseOrders => {
            // Filter pesanan yang valid dari Firebase
            const validFirebaseOrders = firebaseOrders.filter(order => {
                if (!order.id || !order.status || !order.items || !order.date) {
                    console.warn('Pesanan tidak valid dari Firebase:', order);
                    return false;
                }
                return true;
            });
            
            // Ambil pesanan dari localStorage
            const localOrders = JSON.parse(localStorage.getItem('orders') || '[]').filter(o => o.status && o.items && o.date);
            
            // Sinkronkan pesanan: gunakan Firebase sebagai sumber utama, tambahkan localStorage jika belum ada di Firebase
            orders = [
                ...validFirebaseOrders,
                ...localOrders.filter(o => !validFirebaseOrders.some(fo => fo.id === o.id))
            ];
            
            // Simpan kembali ke localStorage
            localStorage.setItem('orders', JSON.stringify(orders));
            updateOrdersCount();
            
            if (orders.length === 0) {
                ordersList.innerHTML = `
                    <tr>
                        <td colspan="6" class="text-center py-5">Belum ada pesanan</td>
                    </tr>
                `;
                return;
            }
            
            let html = '';
            
            orders.forEach(order => {
                // Pastikan status valid sebelum render
                if (!order.status) {
                    console.warn(`Pesanan dengan ID ${order.id} tidak memiliki status valid`);
                    order.status = 'pending'; // Default ke pending jika tidak ada status
                }
                
                html += `
                    <tr data-order-id="${order.id}">
                        <td>#${order.id}</td>
                        <td>${formatDate(order.date)}</td>
                        <td>
                            ${order.items[0].name} (${order.items[0].quantity}x)
                            ${order.items.length > 1 ? `<br><small>+ ${order.items.length - 1} produk lainnya</small>` : ''}
                        </td>
                        <td>${formatCurrency(order.total)}</td>
                        <td>${getOrderStatusBadge(order.status)}</td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary" onclick="viewOrderDetails('${order.id}')">
                                <i class="bi bi-eye"></i> Detail
                            </button>
                            ${order.status === 'pending' ? `
                            <button class="btn btn-sm btn-outline-success mt-1" onclick="confirmPayment('${order.id}')">
                                <i class="bi bi-check-circle"></i> Konfirmasi Pembayaran
                            </button>
                            ` : ''}
                            <button class="btn btn-sm btn-remove-order mt-1" onclick="removeOrder('${order.id}')">
                                <i class="bi bi-trash"></i> Hapus
                            </button>
                        </td>
                    </tr>
                `;
            });
            
            ordersList.innerHTML = html;
            updateOrdersCount();
        })
        .catch(error => {
            console.error('Gagal memuat pesanan:', error);
            showToast('error', 'Gagal memuat daftar pesanan');
        });
}
/* Akhir fungsi untuk memuat halaman pesanan */

/* Fungsi untuk menghapus pesanan */
function removeOrder(orderId) {
    const user = auth.currentUser;
    
    // Jika user login, hapus dari Firebase
    if (user) {
        const db = firebase.firestore();
        const orderRef = db.collection('orders').doc(orderId);
        
        return orderRef.delete()
            .then(() => {
                console.log(`Pesanan ${orderId} berhasil dihapus dari Firebase`);
                
                // Hapus pesanan dari array orders
                orders = orders.filter(order => order.id !== orderId);
                
                // Perbarui localStorage
                localStorage.setItem('orders', JSON.stringify(orders));
                
                // Perbarui tampilan halaman pesanan
                loadOrdersPage();
                
                // Perbarui dropdown pesanan
                loadOrdersDropdown();
                
                // Tampilkan notifikasi
                showToast('success', 'Pesanan berhasil dihapus');
            })
            .catch(error => {
                console.error('Gagal menghapus pesanan dari Firebase:', error);
                showToast('error', 'Gagal menghapus pesanan dari server');
                // Tetap hapus dari localStorage dan array orders untuk konsistensi lokal
                orders = orders.filter(order => order.id !== orderId);
                localStorage.setItem('orders', JSON.stringify(orders));
                loadOrdersPage();
                loadOrdersDropdown();
            });
    } else {
        // Jika tidak ada user, hapus dari localStorage saja
        orders = orders.filter(order => order.id !== orderId);
        localStorage.setItem('orders', JSON.stringify(orders));
        
        // Perbarui tampilan halaman pesanan
        loadOrdersPage();
        
        // Perbarui dropdown pesanan
        loadOrdersDropdown();
        
        // Tampilkan notifikasi
        showToast('success', 'Pesanan berhasil dihapus');
    }
}
/* Akhir fungsi untuk menghapus pesanan */

function getOrderStatusBadge(status) {
    const statusMap = {
        'pending': { class: 'status-pending', text: 'Menunggu Pembayaran' },
        'processing': { class: 'status-processing', text: 'Diproses' },
        'shipped': { class: 'status-shipped', text: 'Dikirim' },
        'delivered': { class: 'status-delivered', text: 'Selesai' },
        'cancelled': { class: 'status-cancelled', text: 'Dibatalkan' }
    };
    
    // Jika status tidak valid, gunakan status default
    if (!status || !statusMap[status]) {
        console.warn(`Status tidak valid ditemukan: ${status}`);
        return `<span class="order-status status-pending">Status Tidak Dikenal</span>`;
    }
    
    return `<span class="order-status ${statusMap[status].class}">${statusMap[status].text}</span>`;
}

// Product detail functions
function showProductDetails(productId) {
    const product = products[productId];
    if (!product) return;

    const modalTitle = document.getElementById('productModalTitle');
    const modalImage = document.getElementById('productModalImage');
    const modalName = document.getElementById('productModalName');
    const modalPrice = document.getElementById('productModalPrice');
    const modalDescription = document.getElementById('productModalDescription');
    const modalSpecs = document.getElementById('productModalSpecs');

    if (!modalTitle || !modalImage || !modalName || !modalPrice || !modalDescription || !modalSpecs) {
        console.error('One or more modal elements are missing in the HTML');
        return;
    }

    modalTitle.textContent = product.name;
    modalImage.src = product.image;
    modalName.textContent = product.name;
    modalPrice.textContent = formatCurrency(product.price);
    modalDescription.textContent = product.description;

    modalSpecs.innerHTML = '';
    product.specs.forEach(spec => {
        const li = document.createElement('li');
        li.textContent = spec;
        modalSpecs.appendChild(li);
    });

    const starRating = document.querySelector('#productDetailModal .star-rating');
    if (starRating) {
        starRating.innerHTML = '';
        const fullStars = Math.floor(product.rating);
        const hasHalfStar = product.rating % 1 >= 0.5;

        for (let i = 1; i <= 5; i++) {
            if (i <= fullStars) {
                starRating.innerHTML += '<i class="bi bi-star-fill"></i>';
            } else if (i === fullStars + 1 && hasHalfStar) {
                starRating.innerHTML += '<i class="bi bi-star-half"></i>';
            } else {
                starRating.innerHTML += '<i class="bi bi-star"></i>';
            }
        }
        starRating.innerHTML += `<small class="text-muted ms-1">(${product.reviews} ulasan)</small>`;
    }

    const reviewsTab = document.querySelector('#reviews .tab-pane');
    if (reviewsTab) {
        reviewsTab.innerHTML = '';

        product.reviewsList.forEach(review => {
            reviewsTab.innerHTML += `
                <div class="review-item">
                    <div class="d-flex justify-content-between mb-2">
                        <div>
                            <span class="review-author">${review.author}</span>
                            ${review.verified ? '<span class="verified-buyer">Pembeli Terverifikasi</span>' : ''}
                        </div>
                        <span class="review-date">${review.date}</span>
                    </div>
                    <div class="star-rating mb-2">
                        ${'<i class="bi bi-star-fill"></i>'.repeat(review.rating)}
                        ${'<i class="bi bi-star"></i>'.repeat(5 - review.rating)}
                    </div>
                    <p>${review.comment}</p>
                </div>
            `;
        });
    }

    const productDetailModal = new bootstrap.Modal(document.getElementById('productDetailModal'));
    productDetailModal.show();
}

function loadProductsPage() {
    const productsList = document.getElementById('productsList');
    if (!productsList) {
        console.error('Element with ID "productsList" not found');
        return;
    }

    let html = '';
    Object.values(products).forEach(product => {
        html += `
            <div class="col-md-4 mb-4">
                <div class="card h-100">
                    <img src="${product.image}" class="card-img-top" alt="${product.name}">
                    <div class="card-body">
                        <h5 class="card-title">${product.name}</h5>
                        <p class="card-text">${formatCurrency(product.price)}</p>
                        <div class="star-rating">
                            ${'<i class="bi bi-star-fill"></i>'.repeat(Math.floor(product.rating))}
                            ${product.rating % 1 >= 0.5 ? '<i class="bi bi-star-half"></i>' : ''}
                            ${'<i class="bi bi-star"></i>'.repeat(5 - Math.ceil(product.rating))}
                            <small class="text-muted ms-1">(${product.reviews})</small>
                        </div>
                        <button class="btn btn-primary mt-2" onclick="showProductDetails(${product.id})">Lihat Detail</button>
                        <button class="btn btn-success mt-2" onclick="addToCart(${product.id})">Tambah ke Keranjang</button>
                    </div>
                </div>
            </div>
        `;
    });

    productsList.innerHTML = html;
}

function addToCartFromModal() {
    const productName = document.getElementById('productModalTitle').textContent;
    const productId = Object.keys(products).find(id => products[id].name === productName);
    
    if (productId) {
        addToCart(parseInt(productId));
    }
}

function buyNow() {
    addToCartFromModal();
    const modal = bootstrap.Modal.getInstance(document.getElementById('productDetailModal'));
    if (modal) modal.hide();
    showSection('cart');
}

function checkout() {
    if (cart.length === 0) {
        showToast('error', 'Keranjang belanja kosong');
        return;
    }
    
    showSection('checkout');
}

function loadCheckoutPage() {
    const checkoutProducts = document.getElementById('checkoutProducts');
    const checkoutSubtotal = document.getElementById('checkoutSubtotal');
    const checkoutShipping = document.getElementById('checkoutShipping');
    const checkoutTotal = document.getElementById('checkoutTotal');
    
    if (!checkoutProducts || !checkoutSubtotal || !checkoutShipping || !checkoutTotal) return;
    
    if (cart.length === 0) {
        checkoutProducts.innerHTML = `
            <tr>
                <td colspan="4" class="text-center py-5">Tidak ada produk</td>
            </tr>
        `;
        checkoutSubtotal.textContent = formatCurrency(0);
        checkoutShipping.textContent = formatCurrency(0);
        checkoutTotal.textContent = formatCurrency(0);
        return;
    }
    
    let subtotal = 0;
    let html = '';
    
    cart.forEach(item => {
        subtotal += item.price * item.quantity;
        html += `
            <tr>
                <td>
                    <div class="d-flex align-items-center">
                        <img src="${item.image}" alt="${item.name}" width="60" class="rounded me-3">
                        <div>
                            <h6 class="mb-0">${item.name}</h6>
                        </div>
                    </div>
                </td>
                <td>${formatCurrency(item.price)}</td>
                <td>${item.quantity}</td>
                <td>${formatCurrency(item.price * item.quantity)}</td>
            </tr>
        `;
    });
    
    const shipping = 15000;
    const total = subtotal + shipping;
    
    checkoutProducts.innerHTML = html;
    checkoutSubtotal.textContent = formatCurrency(subtotal);
    checkoutShipping.textContent = formatCurrency(shipping);
    checkoutTotal.textContent = formatCurrency(total);
}

function checkPlaceOrder() {
    // Periksa apakah keranjang kosong
    if (cart.length === 0) {
        showToast('error', 'Keranjang belanja kosong. Silakan tambahkan produk terlebih dahulu.');
        showSection('products');
        return;
    }

    // Periksa apakah semua field checkout terisi
    const requiredFields = [
        'fullName', 'phoneNumber', 'address', 
        'province', 'city', 'postalCode', 'shippingMethod', 'email' // Tambahkan email sebagai wajib
    ];
    
    const missingFields = [];
    requiredFields.forEach(fieldId => {
        const field = document.getElementById(fieldId);
        if (!field || !field.value.trim()) {
            missingFields.push(fieldId);
        }
    });

    if (missingFields.length > 0) {
        showToast('error', 'Harap lengkapi semua informasi pengiriman, termasuk email');
        // Scroll ke field yang kosong
        const firstMissingField = document.getElementById(missingFields[0]);
        if (firstMissingField) {
            firstMissingField.scrollIntoView({ behavior: 'smooth', block: 'center' });
            firstMissingField.focus();
        }
        return;
    }

    // Validasi format email
    const emailField = document.getElementById('email');
    if (!emailField.checkValidity() || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailField.value)) {
        showToast('error', 'Email tidak valid');
        emailField.scrollIntoView({ behavior: 'smooth', block: 'center' });
        emailField.focus();
        return;
    }

    // Jika semua valid, lanjutkan dengan placeOrder
    placeOrder().catch(error => {
        console.error('Error di checkPlaceOrder:', error);
    });
}

function placeOrder() {
    if (cart.length === 0) {
        showToast('error', 'Keranjang belanja kosong. Silakan tambahkan produk terlebih dahulu.');
        showSection('products');
        return Promise.reject('Keranjang belanja kosong');
    }

    const requiredFields = [
        'fullName', 'email', 'phoneNumber', 'address',
        'province', 'city', 'postalCode', 'shippingMethod'
    ];

    const missingFields = [];
    requiredFields.forEach(fieldId => {
        const field = document.getElementById(fieldId);
        if (!field || !field.value.trim()) {
            missingFields.push(fieldId);
        }
    });

    if (missingFields.length > 0) {
        showToast('error', 'Harap lengkapi semua informasi pengiriman, termasuk email');
        return Promise.reject('Informasi pengiriman tidak lengkap');
    }

    const emailField = document.getElementById('email');
    if (!emailField.checkValidity() || !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailField.value)) {
        showToast('error', 'Email tidak valid');
        return Promise.reject('Email tidak valid');
    }

    const bankSelect = document.getElementById('bankSelect');
    const ewalletSelect = document.getElementById('ewalletSelect');
    if (document.querySelector('#bank-tab').classList.contains('active') && !bankSelect.value) {
        showToast('error', 'Harap pilih bank untuk pembayaran');
        bankSelect.scrollIntoView({ behavior: 'smooth', block: 'center' });
        bankSelect.focus();
        return Promise.reject('Bank tidak dipilih');
    }
    if (document.querySelector('#ewallet-tab').classList.contains('active') && !ewalletSelect.value) {
        showToast('error', 'Harap pilih dompet digital untuk pembayaran');
        ewalletSelect.scrollIntoView({ behavior: 'smooth', block: 'center' });
        ewalletSelect.focus();
        return Promise.reject('Dompet digital tidak dipilih');
    }

    const orderId = 'ORD-' + Date.now();
    const orderDate = new Date();
    const subtotal = cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
    const shipping = 15000;
    const total = subtotal + shipping;

    const newOrder = {
        id: orderId,
        date: orderDate,
        items: [...cart],
        subtotal: subtotal,
        shipping: shipping,
        total: total,
        status: 'pending',
        shippingInfo: {
            name: document.getElementById('fullName').value,
            email: document.getElementById('email').value,
            phone: document.getElementById('phoneNumber').value,
            address: document.getElementById('address').value,
            province: document.getElementById('province').value,
            city: document.getElementById('city').value,
            postalCode: document.getElementById('postalCode').value,
            shippingMethod: document.getElementById('shippingMethod').value
        },
        paymentInfo: {
            method: document.querySelector('#paymentMethodTab .nav-link.active').textContent,
            details: document.querySelector('#paymentMethodTabContent .tab-pane.active .alert').textContent
        }
    };

    console.log('Membuat pesanan baru:', newOrder);

    // Pastikan saveOrderToFirebase tersedia
    if (typeof saveOrderToFirebase !== 'function') {
        console.error('Fungsi saveOrderToFirebase tidak didefinisikan');
        showToast('error', 'Terjadi kesalahan sistem. Silakan coba lagi nanti.');
        return Promise.reject('Fungsi saveOrderToFirebase tidak didefinisikan');
    }

    return saveOrderToFirebase(newOrder)
        .then(() => {
            orders.unshift(newOrder);
            localStorage.setItem('orders', JSON.stringify(orders));

            cart = [];
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
            loadCartDropdown();

            const user = auth.currentUser;
            let emailToSend = document.getElementById('email').value.trim();
            if (user && user.email && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(user.email)) {
                emailToSend = user.email;
                console.log('Menggunakan email dari Firebase Auth:', emailToSend);
            } else {
                console.log('Menggunakan email dari form checkout:', emailToSend);
            }

            if (emailToSend && /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(emailToSend)) {
                return sendOrderConfirmation(
                    orderId,
                    emailToSend,
                    user?.displayName || document.getElementById('fullName').value || 'Pelanggan',
                    newOrder
                ).catch(emailError => {
                    console.warn('Gagal mengirim email konfirmasi:', emailError);
                    showToast('warning', 'Pesanan berhasil dibuat, tetapi email konfirmasi gagal dikirim');
                    return Promise.resolve();
                });
            } else {
                console.warn('Tidak mengirim email karena email tidak valid:', emailToSend);
                showToast('warning', 'Pesanan berhasil dibuat, tetapi email konfirmasi tidak dikirim karena email tidak tersedia');
                return Promise.resolve();
            }
        })
        .then(() => {
            const modalElement = document.getElementById('orderSuccessModal');
            if (modalElement) {
                const modal = new bootstrap.Modal(modalElement);
                modal.show();
            }

            updateOrdersCount();
            loadOrdersDropdown();

            if (auth.currentUser) {
                return getUserOrders(auth.currentUser.uid);
            }
            return Promise.resolve([]);
        })
        .then(firebaseOrders => {
            if (firebaseOrders) {
                const validFirebaseOrders = firebaseOrders.filter(order => {
                    if (!order.id || !order.status || !order.items || !order.date) {
                        console.warn('Pesanan tidak valid dari Firebase:', order);
                        return false;
                    }
                    return true;
                });

                orders = [...validFirebaseOrders, ...orders.filter(o => !validFirebaseOrders.some(fo => fo.id === o.id))];
                localStorage.setItem('orders', JSON.stringify(orders));
                loadOrdersDropdown();
                loadOrdersPage();
            }
            showToast('success', 'Pesanan berhasil dibuat!');
            showSection('orders');
        })
        .catch(error => {
            console.error('Error saat menyimpan pesanan:', error);
            showToast('error', 'Gagal menyimpan pesanan: ' + error.message);
            throw error;
        });
}

// Fungsi untuk melihat detail pesanan
function viewOrderDetails(orderId) {
    const order = orders.find(o => o.id === orderId);
    if (!order) {
        showToast('error', 'Pesanan tidak ditemukan');
        return;
    }
    
    // Buat modal untuk menampilkan detail pesanan
    const modalHtml = `
        <div class="modal fade" id="orderDetailModal" tabindex="-1" aria-hidden="true">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title">Detail Pesanan #${order.id}</h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <h6>Status Pesanan</h6>
                                <p>${getOrderStatusBadge(order.status)}</p>
                                
                                <h6 class="mt-3">Tanggal Pesanan</h6>
                                <p>${formatDate(order.date)}</p>
                                
                                <h6 class="mt-3">Total Pembayaran</h6>
                                <p>${formatCurrency(order.total)}</p>
                            </div>
                            <div class="col-md-6">
                                <h6>Metode Pembayaran</h6>
                                <p>${order.paymentInfo.method}</p>
                                
                                <h6 class="mt-3">Detail Pembayaran</h6>
                                <p>${order.paymentInfo.details.replace(/\n/g, '<br>')}</p>
                            </div>
                        </div>
                        
                        <h6>Produk yang Dipesan</h6>
                        <div class="table-responsive">
                            <table class="table">
                                <thead>
                                    <tr>
                                        <th>Produk</th>
                                        <th>Harga</th>
                                        <th>Jumlah</th>
                                        <th>Subtotal</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    ${order.items.map(item => `
                                        <tr>
                                            <td>
                                                <div class="d-flex align-items-center">
                                                    <img src="${item.image}" alt="${item.name}" width="60" class="rounded me-3">
                                                    <div>${item.name}</div>
                                                </div>
                                            </td>
                                            <td>${formatCurrency(item.price)}</td>
                                            <td>${item.quantity}</td>
                                            <td>${formatCurrency(item.price * item.quantity)}</td>
                                        </tr>
                                    `).join('')}
                                </tbody>
                            </table>
                        </div>
                        
                        <h6 class="mt-4">Alamat Pengiriman</h6>
                        <p>
                            ${order.shippingInfo.name}<br>
                            ${order.shippingInfo.email}<br>
                            ${order.shippingInfo.address}<br>
                            ${order.shippingInfo.city}, ${order.shippingInfo.province}<br>
                            Kode Pos: ${order.shippingInfo.postalCode}<br>
                            Telepon: ${order.shippingInfo.phone}<br>
                            Metode Pengiriman: ${order.shippingInfo.shippingMethod}
                        </p>
                        
                        ${order.status === 'pending' ? `
                        <div class="alert alert-warning mt-4">
                            <h6>Konfirmasi Pembayaran</h6>
                            <p>Silakan lakukan transfer sesuai instruksi di atas, lalu klik tombol di bawah untuk mengkonfirmasi pembayaran Anda.</p>
                            <button class="btn btn-success" onclick="confirmPayment('${order.id}')">
                                <i class="bi bi-check-circle"></i> Saya Sudah Bayar
                            </button>
                        </div>
                        ` : ''}
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Tutup</button>
                    </div>
                </div>
            </div>
        </div>
    `;
    
    // Tambahkan modal ke body jika belum ada
    if (!document.getElementById('orderDetailModal')) {
        document.body.insertAdjacentHTML('beforeend', modalHtml);
    }
    
    // Tampilkan modal
    const modal = new bootstrap.Modal(document.getElementById('orderDetailModal'));
    modal.show();
}

/* Fungsi untuk mengkonfirmasi pembayaran */
function confirmPayment(orderId) {
    // Pastikan modal ada di HTML
    const modalElement = document.getElementById('confirmPaymentModal');
    if (!modalElement) {
        console.error('Modal confirmPaymentModal tidak ditemukan di HTML');
        showToast('error', 'Terjadi kesalahan: Modal konfirmasi tidak ditemukan');
        return;
    }
    
    // Perbarui ID pesanan di modal
    const orderIdElement = document.getElementById('confirmOrderId');
    if (orderIdElement) {
        orderIdElement.textContent = orderId;
    } else {
        console.warn('Elemen confirmOrderId tidak ditemukan, menggunakan teks statis');
        document.querySelector('#confirmPaymentModal .modal-body').innerHTML = 
            `Apakah Anda yakin sudah melakukan pembayaran untuk pesanan #${orderId}?`;
    }
    
    // Tampilkan modal
    const modal = new bootstrap.Modal(modalElement);
    console.log('Menampilkan modal konfirmasi untuk pesanan:', orderId);
    modal.show();
    
    // Tambahkan event listener untuk tombol konfirmasi
    const confirmButton = document.getElementById('confirmPaymentButton');
    if (!confirmButton) {
        console.error('Tombol confirmPaymentButton tidak ditemukan di modal');
        showToast('error', 'Terjadi kesalahan: Tombol konfirmasi tidak ditemukan');
        modal.hide();
        return;
    }
    
    // Hapus event listener sebelumnya untuk mencegah duplikasi
    const newConfirmButton = confirmButton.cloneNode(true);
    confirmButton.parentNode.replaceChild(newConfirmButton, confirmButton);
    
    newConfirmButton.onclick = function () {
        console.log('Konfirmasi pembayaran untuk pesanan:', orderId);
        
        // Update status di Firebase
        updateOrderStatus(orderId, 'processing')
            .then(() => {
                // Update status di localStorage
                const orderIndex = orders.findIndex(o => o.id === orderId);
                if (orderIndex !== -1) {
                    orders[orderIndex].status = 'processing';
                    localStorage.setItem('orders', JSON.stringify(orders));
                    console.log('Status pesanan diperbarui di localStorage:', orders[orderIndex]);
                } else {
                    console.warn('Pesanan tidak ditemukan di array orders:', orderId);
                }
                
                // Tampilkan notifikasi sukses menggunakan toast
                showToast('success', 'Konfirmasi pembayaran berhasil. Pesanan akan segera diproses.');
                console.log('Notifikasi sukses ditampilkan untuk pesanan:', orderId);
                
                // Reload daftar pesanan
                loadOrdersDropdown();
                loadOrdersPage();
                
                // Tutup modal detail jika terbuka
                const detailModal = bootstrap.Modal.getInstance(document.getElementById('orderDetailModal'));
                if (detailModal) {
                    detailModal.hide();
                    console.log('Modal detail pesanan ditutup');
                }
                
                // Tutup modal konfirmasi
                modal.hide();
                console.log('Modal konfirmasi ditutup');
            })
            .catch(error => {
                console.error('Error confirming payment:', error);
                showToast('error', 'Gagal mengkonfirmasi pembayaran: ' + error.message);
                modal.hide();
            });
    };
}
/* Akhir fungsi untuk mengkonfirmasi pembayaran */

// Fungsi untuk menyimpan pesan kontak ke Firestore dan mengirim email via EmailJS
function sendContactMessage(name, email, message) {
    const title = "Pesan Kontak dari " + name;
    const to_email = "3xdorrr@gmail.com";
    
    // Simpan ke Firestore
    const saveToFirestore = db.collection('contactMessages').add({
        name: name,
        email: email,
        title: title,
        message: message,
        timestamp: firebase.firestore.FieldValue.serverTimestamp()
    }).catch(err => {
        console.error('Firestore error:', err);
        throw new Error('Gagal menyimpan ke Firestore: ' + err.message);
    });
    
    // Kirim email ke admin via EmailJS
    const sendAdminEmail = emailjs.send('service_x2u80lp', 'template_a057amj', {
        name: name,
        email: email,
        title: title,
        message: message,
        to_email: to_email
    }).catch(err => {
        console.error('EmailJS admin error:', err);
        throw new Error('Gagal mengirim email ke admin: ' + err.message);
    });
    
    // Kirim email konfirmasi ke pengguna via EmailJS
    const sendUserEmail = emailjs.send('service_tsgp232', 'template_a057amj', {
        name: name,
        email: email,
        message: message
    }).catch(err => {
        console.error('EmailJS user error:', err);
        throw new Error('Gagal mengirim email konfirmasi ke pengguna: ' + err.message);
    });
    
    return Promise.all([saveToFirestore, sendAdminEmail, sendUserEmail]);
}

function formatCurrency(amount) {
    return new Intl.NumberFormat('id-ID', { style: 'currency', currency: 'IDR', minimumFractionDigits: 0 }).format(amount);
}

function formatDate(date) {
    if (!(date instanceof Date)) {
        date = new Date(date);
    }
    return date.toLocaleDateString('id-ID', { day: 'numeric', month: 'long', year: 'numeric' });
}

function showToast(type, message) {
    const toastElement = type === 'success' ? document.getElementById('successToast') : document.getElementById('errorToast');
    if (!toastElement) return;
    
    const toast = new bootstrap.Toast(toastElement);
    
    const toastBody = toastElement.querySelector('.toast-body');
    if (toastBody) toastBody.textContent = message;
    toast.show();
}

const bankSelect = document.getElementById('bankSelect');
if (bankSelect) {
    bankSelect.addEventListener('change', function() {
        const bankAccounts = {
            'bca': { name: 'John Doe', number: '1234567890' },
            'bni': { name: 'John Doe', number: '9876543210' },
            'bri': { name: 'John Doe', number: '5678901234' },
            'mandiri': { name: 'John Doe', number: '4321098765' },
            'seabank': { name: 'John Doe', number: '1357924680' }
        };
        
        const selectedBank = this.value;
        const accountInfo = bankAccounts[selectedBank];
        const bankAccountInfo = document.getElementById('bankAccountInfo');
        if (bankAccountInfo) bankAccountInfo.innerHTML = `Nama: ${accountInfo.name}<br>Nomor Rekening: ${accountInfo.number}`;
    });
}

function loginWithEmail(email, password) {
    return auth.signInWithEmailAndPassword(email, password)
        .then((userCredential) => {
            return userCredential.user;
        })
        .catch((error) => {
            throw error;
        });
}

function registerWithEmail(name, email, password) {
    return auth.createUserWithEmailAndPassword(email, password)
        .then((userCredential) => {
            return userCredential.user.updateProfile({
                displayName: name
            });
        })
        .catch((error) => {
            throw error;
        });
}

function loginWithGoogle() {
    const provider = new firebase.auth.GoogleAuthProvider();
    return auth.signInWithPopup(provider)
        .then((result) => {
            return result.user;
        })
        .catch((error) => {
            throw error;
        });
}

function getAuthErrorMessage(error) {
    switch (error.code) {
        case 'auth/email-already-in-use':
            return 'Email sudah terdaftar';
        case 'auth/invalid-email':
            return 'Email tidak valid';
        case 'auth/weak-password':
            return 'Password terlalu lemah (minimal 6 karakter)';
        case 'auth/user-not-found':
            return 'Email tidak terdaftar';
        case 'auth/wrong-password':
            return 'Password salah';
        case 'auth/popup-closed-by-user':
            return 'Popup login ditutup';
        default:
            return 'Terjadi kesalahan: ' + error.message;
    }
}

function updateAuthUI() {
    const user = auth.currentUser;
    const authSection = document.getElementById('authSection');
    const accountSection = document.getElementById('accountSection');
    
    if (!authSection || !accountSection) return;
    
    if (user) {
        authSection.classList.add('d-none');
        accountSection.classList.remove('d-none');
        
        const accountName = document.getElementById('accountName');
        const accountEmail = document.getElementById('accountEmail');
        const firstName = document.getElementById('firstName');
        const lastName = document.getElementById('lastName');
        const email = document.getElementById('email');
        
        if (accountName) accountName.textContent = user.displayName || 'Pengguna';
        if (accountEmail) accountEmail.textContent = user.email;
        if (firstName) firstName.value = user.displayName?.split(' ')[0] || '';
        if (lastName) lastName.value = user.displayName?.split(' ')[1] || '';
        if (email) email.value = user.email || '';
        
        const profileImage = document.querySelector('#accountSection img');
        if (profileImage) {
            if (user.photoURL) {
                profileImage.src = user.photoURL;
            } else {
                profileImage.src = "https://via.placeholder.com/150";
            }
        }
        
        // Load orders dari Firebase saat user login
        getUserOrders(user.uid)
            .then(firebaseOrders => {
                if (firebaseOrders && firebaseOrders.length > 0) {
                    orders = [...firebaseOrders, ...orders.filter(o => !firebaseOrders.some(fo => fo.id === o.id))];
                    localStorage.setItem('orders', JSON.stringify(orders));
                    
                    // Update tampilan jika sedang di halaman orders
                    if (window.location.hash === '#orders') {
                        loadOrdersDropdown();
                        loadOrdersPage();
                    }
                    
                    // Update badge pesanan
                    if (ordersCount) ordersCount.textContent = orders.length;
                }
            })
            .catch(error => {
                console.error('Error loading user orders:', error);
            });
    } else {
        authSection.classList.remove('d-none');
        accountSection.classList.add('d-none');
    }
}

function switchAuthTab(tabId) {
    const tabButton = document.getElementById(`${tabId}-tab`);
    if (tabButton) {
        const tab = new bootstrap.Tab(tabButton);
        tab.show();
    }
}

function logout() {
    auth.signOut()
        .then(() => {
            showToast('success', 'Logout berhasil');
            updateAuthUI();
            showSection('dashboard');
        })
        .catch((error) => {
            showToast('error', 'Gagal logout: ' + error.message);
        });
}

function saveUserAdditionalData(userId, data) {
    return db.collection('users').doc(userId).set(data, { merge: true });
}

window.addEventListener('load', function() {
    const loadingSpinner = document.querySelector('.loading-spinner');
    if (loadingSpinner) {
        loadingSpinner.style.display = 'none';
    }
});

// Make functions available globally
window.addToCart = addToCart;
window.removeFromCart = removeFromCart;
window.updateQuantity = updateQuantity;
window.showProductDetails = showProductDetails;
window.addToCartFromModal = addToCartFromModal;
window.buyNow = buyNow;
window.checkout = checkout;
window.placeOrder = placeOrder;
window.viewOrderDetails = viewOrderDetails;
window.confirmPayment = confirmPayment;
window.switchAuthTab = switchAuthTab;
window.logout = logout;
window.showSection = showSection;
</script>
        </body>
    </html>
<!-- End of HTML document -->
